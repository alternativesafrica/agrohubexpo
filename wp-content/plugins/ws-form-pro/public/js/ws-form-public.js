!function(t){"use strict";t.WS_Form.prototype.set_is_admin=function(){return!1},t.WS_Form.prototype.init=function(){this.data_cache_build(),this.set_globals()},t.WS_Form.prototype.init_after_get_submit=function(e){t.WS_Form.debug_rendered&&(!1!==this.submit_auto_populate&&this.log("debug_action_get",this.submit_auto_populate.action_label),!1!==this.submit&&this.log("debug_submit_loaded")),this.form_build()},t.WS_Form.prototype.set_globals=function(){this.framework_id=t.WS_Form.settings_plugin.framework,this.framework=t.WS_Form.frameworks.types[this.framework_id],this.framework_fields=this.framework.fields.public,this.invalid_feedback_mask_placeholder="",void 0!==t.WS_Form.meta_keys.invalid_feedback&&void 0!==t.WS_Form.meta_keys.invalid_feedback.p&&(this.invalid_feedback_mask_placeholder=t.WS_Form.meta_keys.invalid_feedback.p),this.form_action_custom=this.form_obj.attr("action")!=ws_form_settings.url+"submit";var e=void 0!==this.framework.fields.public.class_form_validated?this.framework.fields.public.class_form_validated:[];this.class_validated=e.join(" "),"function"==typeof this.debug&&this.debug(),this.hash_set(this.cookie_get("hash",""),!0),this.visual_editor=void 0!==this.form_canvas_obj.attr("data-visual-builder");var a=this;""!=this.hash?t.WS_Form.this.api_call("submit/hash/"+this.hash,"GET",!1,function(t){a.submit=t.data,a.init_after_get_submit(!0),a.submit=!1},function(t){a.read_json_populate(),a.init_after_get_submit(!1)}):(this.read_json_populate(),this.init_after_get_submit(!1))},t.WS_Form.prototype.read_json_populate=function(){"undefined"!=typeof wsf_form_json_populate&&void 0!==wsf_form_json_populate[this.form_id]&&(this.submit_auto_populate=wsf_form_json_populate[this.form_id])},t.WS_Form.prototype.log=function(e,a,i){if(void 0===a)a="";if(void 0===i)i="";return!!t.WS_Form.debug_rendered&&this.debug_audit_add("log",this.language(e,a,!1).replace(/%s/g,a),i)},t.WS_Form.prototype.error=function(e,a,i){if(void 0===a)a="";if(void 0===i)i="";var r=this.language(e,a,!1).replace(/%s/g,a);return!this.visual_editor&&this.get_object_meta_value(this.form,"submit_show_errors",!0)&&this.action_message(r,"danger","after",4e3,!1,!1,!1,!1,!0),!!t.WS_Form.debug_rendered&&this.debug_audit_add("error",r,i)},t.WS_Form.prototype.form_render=function(){this.form_timer();var t=[];if(void 0!==this.form.meta.action&&void 0!==this.form.meta.action.groups&&void 0!==this.form.meta.action.groups[0]&&void 0!==this.form.meta.action.groups[0].rows)for(var e in this.form.meta.action.groups[0].rows)this.form.meta.action.groups[0].rows.hasOwnProperty(e)&&this.form.meta.action.groups[0].rows[e]&&void 0!==this.form.meta.action.groups[0].rows[e].id&&void 0!==this.form.meta.action.groups[0].rows[e].disabled&&"on"!=this.form.meta.action.groups[0].rows[e].disabled&&null!==this.form.meta.action.groups[0].rows[e].id&&t.push(this.form.meta.action.groups[0].rows[e].id.toString());this.conditional_actions_run_save=t,this.conditional_actions_run_submit=t,this.conditional_actions_changed=!1,this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],this.recaptchas_conditions=[],this.signatures=[],this.signatures_by_name=[],this.form_init_js(),this.form_tabs(),this.form_section_repeatable(),this.form_navigation(),this.form_analytics(),this.form_validation(),this.form_select_all(),this.form_select_min_max(),this.form_select_ajax(),this.form_checkbox_min_max(),this.form_character_word_count(),this.form_date(),this.form_color(),this.form_signature(),this.form_recaptcha(),this.form_legal(),this.form_rating(),this.form_ecommerce(),this.form_conditional(!0),this.form_progress(),this.form_input_range(),this.form_textarea(),this.form_file(),this.form_required(),this.form_inputmask(),this.form_spam_protection(),this.form_tracking(),this.form_password_strength_meter(),this.form_credit_card(),this.form_bypass(!1,"form"),this.form_calc(),this.form_preview(),this.form_stat(),this.form_validate_real_time(),this.form_cascade(),this.log("debug_form_rendered"),this.trigger("rendered"),this.section_repeatable_hidden_field()},t.WS_Form.prototype.form_timer=function(){this.date_start=this.cookie_get("date_start",!1),(!1===this.date_start||isNaN(this.date_start)||""==this.date_start)&&(this.date_start=(new Date).getTime(),this.cookie_set("date_start",this.date_start,!1))},t.WS_Form.prototype.trigger=function(e){var a="wsf-"+e;t(document).trigger(a,[this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj]),this.log("log_trigger",a,"event");var i="wsf-"+e+"-instance-"+this.form_instance_id;t(window).trigger(i);var r="wsf-"+e+"-form-"+this.form_id;t(window).trigger(r)},t.WS_Form.prototype.form_init_js=function(){if(void 0!==this.framework.init_js){var e={form_canvas_selector:"#"+this.form_obj_id},a=this.mask_parse(this.framework.init_js,e);try{t.globalEval("(function($) { $(function() {"+a+"}) })(jQuery);")}catch(t){this.error("error_js",action_javascript)}}},t.WS_Form.prototype.form_reset=function(e){var a=this;for(var i in this.trigger("reset-before"),this.form_obj.removeClass(this.class_validated),this.form_obj[0].reset(),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(i)){var r=this.field_data_cache[i],s=r.id,o=this.field_name_prefix+s,n=t.WS_Form.field_type_cache[r.type],c=void 0!==n.trigger?n.trigger:"change";switch(r.type){case"textarea":t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){a.textarea_set_value(t(this),t(this).val()),t(this).trigger(c)});break;case"color":t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){"function"==typeof t(this).minicolors&&t(this).minicolors("value",t(this).val()).trigger(c)});break;default:t('[name="'+o+'"], [name^="'+o+'["]',this.form_canvas_obj).each(function(){t(this).trigger(c)})}}this.signatures_clear(),this.recaptcha_reset(),this.form_conditional(),this.trigger("reset-complete")},t.WS_Form.prototype.form_clear=function(){var e=this;for(var a in this.trigger("clear-before"),this.form_obj.removeClass(this.class_validated),this.field_data_cache)if(this.field_data_cache.hasOwnProperty(a)){var i=this.field_data_cache[a],r=i.id,s=this.field_name_prefix+r,o=t.WS_Form.field_type_cache[i.type],n=void 0!==o.trigger?o.trigger:"change";switch(i.type){case"checkbox":case"price_checkbox":case"radio":case"price_radio":t('[name="'+s+'"], [name^="'+s+'["]',this.form_canvas_obj).each(function(){t(this).is(":checked")&&t(this).prop("checked",!1).trigger(n)});break;case"select":case"price_select":t('[name="'+s+'"], [name^="'+s+'["] option',this.form_canvas_obj).each(function(){t(this).is(":selected")&&(t(this).prop("selected",!1),t(this).closest("select").trigger(n))});break;case"textarea":t('[name="'+s+'"], [name^="'+s+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&(t(this).val("").trigger(n),e.textarea_set_value(t(this),""))});break;case"color":t('[name="'+s+'"], [name^="'+s+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&(t(this).val("").trigger(n),"function"==typeof t(this).minicolors&&t(this).minicolors("value",""))});break;default:t('[name="'+s+'"], [name^="'+s+'["]',this.form_canvas_obj).each(function(){""!=t(this).val()&&t(this).val("").trigger(n)})}}this.signatures_clear(),this.recaptcha_reset(),this.form_conditional(),this.trigger("clear-complete")},t.WS_Form.prototype.form_reload=function(){var e=this;""!=this.hash?t.WS_Form.this.api_call("submit/hash/"+this.hash,"GET",!1,function(t){e.submit=t.data,e.form_reload_after_get_submit(!0),e.submit=!1},function(t){e.form_reload_after_get_submit(!1)}):(this.submit=!1,this.form_reload_after_get_submit(!1))},t.WS_Form.prototype.form_reload_after_get_submit=function(e){t('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),this.form_canvas_obj.show(),this.form_canvas_obj.removeClass(this.class_validated),this.form_validation_real_time_hooks=[],this.form_canvas_obj.empty(),this.form_build()},t.WS_Form.prototype.form_hash_clear=function(){this.hash="",this.cookie_clear("hash"),t.WS_Form.debug_rendered&&(this.debug_info("debug_info_hash",this.language("debug_hash_empty")),this.debug_info("debug_info_submit_count",0)),this.log("log_hash_clear")},t.WS_Form.prototype.form_password_strength_meter=function(){var e=this;if("undefined"!=typeof wp&&void 0!==wp.passwordStrength&&void 0!==wp.passwordStrength.meter){var a=t("[data-password-strength-meter]:not([data-init-password-strength-meter])",this.form_canvas_obj);a.each(function(){t(this).attr("data-init-password-strength-meter","");var a=t(this).closest("[data-type]"),i=a.attr("data-id"),r=a.attr("data-repeatable-index"),s=void 0!==r?"-repeat-"+r:"",o=t("#"+e.form_id_prefix+"invalid-feedback-"+i+s,e.form_canvas_obj),n=e.get_field_value_fallback("password",!1,"class_help",[]).join(" "),c='<div id="'+e.form_id_prefix+"password-strength-meter-"+i+s+'" class="'+n+'"></div>';o.length?t(c,this.form_canvas_obj).insertBefore(o):a.append(c),e.form_password_strength_meter_process(t(this))}),a.keyup(function(){e.form_password_strength_meter_process(t(this))})}},t.WS_Form.prototype.form_password_strength_meter_process=function(e){var a=e.closest("[data-type]"),i=a.attr("data-id"),r=a.attr("data-repeatable-index"),s=void 0!==r?"-repeat-"+r:"",o=t("#"+this.form_id_prefix+"field-"+i+s,a).val(),n=t("#"+this.form_id_prefix+"password-strength-meter-"+i+s,a);if(!o)return n.html(""),void e.attr("data-password-strength-meter","");var c=wp.passwordStrength.meter(o,wp.passwordStrength.userInputBlacklist(),o),_=this.get_framework_config_value("message","types");for(var d in _)_.hasOwnProperty(d)&&void 0!==_[d]&&void 0!==_[d].text_class&&n.removeClass(_[d].text_class);switch(c){case 2:d="danger";n.html(this.language("password_strength_bad"));break;case 3:d="warning";n.html(this.language("password_strength_good"));break;case 4:d="success";n.html(this.language("password_strength_strong"));break;case 5:d="danger";n.html(this.language("password_strength_short"));break;default:d="danger";n.html(this.language("password_strength_short"))}e.attr("data-password-strength-meter",d),void 0!==_[d]&&void 0!==_[d].text_class&&n.addClass(_[d].text_class)},t.WS_Form.prototype.form_calc_clean=function(){for(var e in this.calc)if(this.calc.hasOwnProperty(e)){var a=this.calc[e],i=this.get_part_id(a.field.id,a.section_repeatable_index,"field-wrapper");if(!t("#"+i,this.form_canvas_obj).length)return this.calc.splice(e,1),void this.form_calc_clean()}},t.WS_Form.prototype.form_calc=function(e,a){if(void 0===e)e=!1;if(void 0===a)a=!1;for(var i in this.calc)if(this.calc.hasOwnProperty(i)){var r=this.calc[i];if(!1!==a){if(-1!==r.value.indexOf("#section_row_count")){this.form_calc_do(r,"#section_row_count");continue}if(r.field.section_id===a){this.form_calc_do(r,r.field.id);continue}if(!1===r.section_repeatable_index)for(var s in r.field_ids_touched)if(r.field_ids_touched.hasOwnProperty(s)){var o=r.field_ids_touched[s],n=this.field_data_cache[o];(void 0!==n.section_repeatable_section_id&&n.section_repeatable_section_id)===a&&this.form_calc_do(r,o)}}else if(!1!==e){var c=t("#"+e,this.form_canvas_obj),_=c.attr("data-id-hidden"),d=_?c:c.closest("[data-id]"),l=_?parseInt(_,10):parseInt(d.attr("data-id"),10);if(l===r.field.id&&"value"==r.type)continue;var h=r.field_ids_touched;h.length>0&&-1!==h.indexOf(l)&&this.form_calc_do(r,l)}else this.form_calc_do(r,t.WS_Form.debug_rendered?this.language("log_calc_init"):"")}},t.WS_Form.prototype.form_calc_do=function(e,a){if(t.WS_Form.debug_rendered&&this.log("log_calc_fired",e.field.label+" - "+e.value+" ("+this.language("log_calc_fired_triggered",a)+")","calc"),void 0!==t.WS_Form.field_type_cache[e.field.type]){var i=t.WS_Form.field_type_cache[e.field.type];if(i.calc_in,i.calc_in){var r=this.parse_variables_process(e.value,e.section_repeatable_index,!0,e.field).output;switch(e.type){case"field_text_editor":var s=this.get_part_id(e.field.id,e.section_repeatable_index,"field-wrapper");(d=t("[data-text-editor]",t("#"+s,this.form_canvas_obj))).html(r);break;case"field_html":s=this.get_part_id(e.field.id,e.section_repeatable_index,"field-wrapper");(d=t("[data-html]",t("#"+s,this.form_canvas_obj))).html(r);break;case"field_label":var o=this.get_part_id(e.field.id,e.section_repeatable_index,"label");(d=t("#"+o,this.form_canvas_obj)).html(r);break;case"field_help":var n=this.get_part_id(e.field.id,e.section_repeatable_index,"help");(d=t("#"+n,this.form_canvas_obj)).html(r);break;case"field_placeholder":var c=this.get_part_id(e.field.id,e.section_repeatable_index);(d=t("#"+c,this.form_canvas_obj)).attr("placeholder",r);break;case"field_value":var _=this.get_part_id(e.field.id,e.section_repeatable_index),d=t("#"+_,this.form_canvas_obj),l=h=f=!1;switch(e.field.type){case"progress":case"range":case"price_range":r=this.get_number(r,0,!1);l=void 0!==d.attr("min")?d.attr("min"):0;var h=void 0!==d.attr("max")?d.attr("max"):100,f=void 0!==d.attr("step")?d.attr("step"):1;break;case"price":case"price_subtotal":case"cart_price":case"number":case"quantity":case"wc_quantity":r=this.get_number(r,0,!1);l=void 0!==d.attr("min")?d.attr("min"):l,h=void 0!==d.attr("max")?d.attr("max"):h,f=void 0!==d.attr("step")?d.attr("step"):f;break;case"datetime":if(this.get_number(r,0),r>0){var p=d.attr("data-date-format")?d.attr("data-date-format"):ws_form_settings.date_format,m=d.attr("data-time-format")?d.attr("data-time-format"):ws_form_settings.time_format;switch(d.attr("data-date-type")){case"date":var v=p;break;case"time":v=m;args.step=15;break;case"month":v="F Y";break;case"week":v="\\W\\e\\e\\k W, Y";break;default:v=p+" "+m}r=this.date_format(new Date(1e3*r),v)}else r=""}switch(!1!==l&&r<l&&(r=l),!1!==h&&r>h&&(r=h),!1!==f&&(r=this.get_number_to_step(r,f)),e.field.type){case"price":case"price_range":case"price_subtotal":case"cart_price":var u=this.get_number(d.val(),0,!0)!==r;r=this.get_price(r);break;case"progress":case"range":case"number":case"quantity":case"wc_quantity":u=this.get_number(d.val(),0,!1)!==r;break;default:u=d.val()!==r}switch(e.field.type){case"progress":this.form_progress_set_value(d,r);break;case"price":case"price_range":case"price_subtotal":case"cart_price":d.val(r),u&&d.trigger("change");break;default:d.val(r),r==d.val()&&u&&d.trigger("change")}}}else this.error("error_parse_variable_syntax_error_calc_in","ID: "+e.field.id,"parse-variables")}},t.WS_Form.prototype.form_ecommerce=function(){var e=this;if(this.has_ecommerce=t("[data-ecommerce-price],[data-ecommerce-cart-price],[data-ecommerce-cart-total],[data-ecommerce-payment]",this.form_canvas_obj).length,this.has_ecommerce){for(var a in t.WS_Form.ecommerce.cart_price_types)t.WS_Form.ecommerce.cart_price_types.hasOwnProperty(a)&&this.form_add_hidden_input("wsf_ecommerce_cart["+a+"]","",e.form_id_prefix+"ecommerce-cart-"+a);this.form_add_hidden_input("wsf_ecommerce_cart[total]","",e.form_id_prefix+"ecommerce-cart-total"),this.form_add_hidden_input("wsf_ecommerce_transaction","",e.form_id_prefix+"ecommerce-transaction"),this.form_add_hidden_input("wsf_ecommerce_transaction_id","",e.form_id_prefix+"ecommerce-transaction-id"),this.form_add_hidden_input("wsf_ecommerce_status","",e.form_id_prefix+"ecommerce-status"),this.form_add_hidden_input("wsf_ecommerce_payment_method","",e.form_id_prefix+"ecommerce-payment-method"),this.form_ecommerce_set_status("new"),this.ecommerce_cart_price_type=[],t('input[type="text"][data-ecommerce-price],input[data-ecommerce-cart-price],input[data-ecommerce-cart-total]',this.form_canvas_obj).each(function(){var a=e.get_currency(),i={digits:a.decimals,allowMinus:t(this)[0].hasAttribute("data-ecommerce-negative"),suffix:a.suffix,groupSeparator:a.thousand_separator,radixPoint:a.decimal_separator,prefix:a.prefix,removeMaskOnSubmit:!0,rightAlign:!1,clearMaskOnLostFocus:!1};t(this)[0].hasAttribute("data-ecommerce-min")&&(i.min=t(this).attr("data-ecommerce-min")),t(this)[0].hasAttribute("data-ecommerce-max")&&(i.max=t(this).attr("data-ecommerce-max")),void 0!==t(this).inputmask&&t(this).inputmask("currency",i)}),t("input[data-ecommerce-price]:not([data-init-ecommerce-event]),input[data-ecommerce-cart-price]:not([data-init-ecommerce-event]),select[data-ecommerce-price]:not([data-init-ecommerce-event])",this.form_canvas_obj).on("change input keyup",function(a){if(t(this).attr("data-init-ecommerce-event",""),void 0!==t(this).attr("min")){var i=parseInt(t(this).attr("min"),10);"input"==a.type&&parseInt(t(this).val(),10)<i&&t(this).val(i)}if(void 0!==t(this).attr("max")){var r=parseInt(t(this).attr("max"),10);"input"==a.type&&parseInt(t(this).val(),10)>r&&t(this).val(r)}e.form_ecommerce_calculate()}),t("input[data-ecommerce-quantity]:not([data-init-ecommerce-event])",this.form_canvas_obj).on("change input keyup",function(a){if(t(this).attr("data-init-ecommerce-event",""),"change"==a.type&&""==t(this).val()&&t(this).val(0),void 0!==t(this).attr("min")){var i=parseInt(t(this).attr("min"),10);"input"==a.type&&parseInt(t(this).val(),10)<i&&t(this).val(i)}if(void 0!==t(this).attr("max")){var r=parseInt(t(this).attr("max"),10);"input"==a.type&&parseInt(t(this).val(),10)>r&&t(this).val(r)}e.form_ecommerce_calculate()}),this.form_ecommerce_calculate()}},t.WS_Form.prototype.form_ecommerce_calculate=function(){if(this.form_ecommerce_calculate_enabled){var e=[],a=0,i=this.get_currency(),r=[],s=this;for(var o in t("input[data-ecommerce-price],select[data-ecommerce-price]",this.form_canvas_obj).not("[data-ecommerce-price-bypass],[data-ecommerce-price-bypass-section]").each(function(){var e=t(this).closest("[data-id]"),a=e.attr("data-id"),i=e.attr("data-repeatable-index"),o=a+(void 0!==i?"-"+i:""),n=t(this).closest("[data-ecommerce-cart-price-type]");switch(n=n.length?n.attr("data-ecommerce-cart-price-type"):"subtotal",void 0===r[o]&&(r[o]={subtotal:0,type:n,field_id:a,field_repeatable_index:i}),t(this).attr("type")){case"checkbox":case"radio":r[o].subtotal+=t(this).is(":checked")?s.get_number(t(this).attr("data-price"),0,!0):0;break;default:t(this).is("select")?t(this).find("option:selected").each(function(){r[o].subtotal+=s.get_number(t(this).attr("data-price"),0,!0)}):r[o].subtotal+=s.get_number(t(this).val())}}),r)if(r.hasOwnProperty(o)){var n=r[o].field_id,c=r[o].field_repeatable_index,_=r[o].subtotal,d=r[o].type;if(void 0===c)var l=t('input[data-ecommerce-quantity][data-ecommerce-field-id="'+n+'"]',this.form_canvas_obj);else l=t('[data-repeatable-index="'+c+'"] input[data-ecommerce-quantity][data-ecommerce-field-id="'+n+'"]',this.form_canvas_obj);if(l.length)_*=this.get_number(l.first().val());if(void 0===c)var h=t('input[data-ecommerce-price-subtotal][data-ecommerce-field-id="'+n+'"]',this.form_canvas_obj);else h=t('[data-repeatable-index="'+c+'"] input[data-ecommerce-price-subtotal][data-ecommerce-field-id="'+n+'"]',this.form_canvas_obj);if(h.length){var f=this.get_number(h.val(),0,!0)!==this.get_number(_,0,!1);h.val(this.get_price(_,i)),f&&h.trigger("change")}void 0===e[d]&&(e[d]=0),e[d]+=_}for(var d in t.WS_Form.ecommerce.cart_price_types)if(t.WS_Form.ecommerce.cart_price_types.hasOwnProperty(d)){var p=t.WS_Form.ecommerce.cart_price_types[d],m=void 0===p.sum||p.sum,v=void 0!==p.render&&p.render;if("subtotal"==d)var u=void 0!==e[d]?e[d]:0;else{u=0;t("input[data-ecommerce-cart-price][data-ecommerce-cart-price-"+d+"]",this.form_canvas_obj).each(function(){u+=s.get_number(t(this).val())})}if(m&&(a+=u),v&&m){var g=this.get_price(u,i,!1),b=this.get_price(u,i),y="[data-ecommerce-cart-price-"+d+"]",w="#"+this.form_id_prefix+"ecommerce-cart-"+d;this.form_ecommerce_price_type_set(d,y,w,u,g,b)}}g=this.get_price(a,i,!1),b=this.get_price(a,i);this.ecommerce_cart_price_type.total={float:a,string:g,currency:b};y="[data-ecommerce-cart-total]",w="#"+this.form_id_prefix+"ecommerce-cart-total";this.form_ecommerce_price_type_set(!1,y,w,a,g,b)}},t.WS_Form.prototype.form_ecommerce_price_type_set=function(e,a,i,r,s,o){var n=this;(c=t(a,this.form_canvas_obj)).each(function(){if(t(this).is("input")){var e=n.get_number(t(this).val(),0,!0)!=n.get_number(o,0);t(this).val(s),e&&t(this).trigger("change")}if(t(this).is("span")){var a=void 0!==t(this).attr("data-ecommerce-price-currency")?o:s;t(this).html(a)}});var c=t(i,this.form_canvas_obj),_=n.get_number(c.val(),0,!1)!=n.get_number(r,0,!1);c.val(r),_&&c.trigger("change"),!1!==e&&(this.ecommerce_cart_price_type[e]={float:r,string:s,currency:o})},t.WS_Form.prototype.form_ecommerce_payment_error=function(t){this.error("error_payment",t,"payment")},t.WS_Form.prototype.form_ecommerce_payment_process=function(t,e,a){this.form_ecommerce_set_status("completed"),this.form_ecommerce_set_transaction_id(t),this.form_ecommerce_set_payment_method(a),this.form_ecommerce_set_payment_amount(e),this.form_obj.submit()},t.WS_Form.prototype.form_ecommerce_set_status=function(e){t("#"+this.form_id_prefix+"ecommerce-status",this.form_canvas_obj).val(e),this.log("log_ecommerce_status",e,"ecommerce")},t.WS_Form.prototype.form_ecommerce_set_transaction_id=function(e){t("#"+this.form_id_prefix+"ecommerce-transaction-id",this.form_canvas_obj).val(e),this.log("log_ecommerce_transaction_id",e,"ecommerce")},t.WS_Form.prototype.form_ecommerce_set_transaction=function(e){t("#"+this.form_id_prefix+"ecommerce-transaction",this.form_canvas_obj).val(e)},t.WS_Form.prototype.form_ecommerce_set_payment_method=function(e){t("#"+this.form_id_prefix+"ecommerce-payment-method",this.form_canvas_obj).val(e),this.log("log_ecommerce_payment_method",e,"ecommerce")},t.WS_Form.prototype.form_ecommerce_set_payment_amount=function(e){this.form_ecommerce_calculate_enabled=!1,t("#"+this.form_id_prefix+"ecommerce-cart-total",this.form_canvas_obj).val(e).trigger("change"),this.log("log_ecommerce_payment_amount",e,"ecommerce")},t.WS_Form.prototype.form_credit_card=function(){t("input[data-credit-card]:not([data-init-credit-card])",this.form_canvas_obj).each(function(){t(this).attr("data-init-credit-card",""),t(this).on("input",function(){if(void 0!==t(this).inputmask){var e,a=t(this).val().replace(/\D/g,"");e=/^3[47]\d{0,13}$/.test(a)?"9999 999999 99999":/^3(?:0[0-5]|[68]\d)\d{0,11}$/.test(a)?"9999 999999 9999":/^\d{0,16}$/.test(a)?"9999 9999 9999 9999":"remove",t(this).attr("data-currentmask")!=e&&(t(this).attr("data-currentmask",e),t(this).inputmask(e,{placeholder:"",clearMaskOnLostFocus:!1}))}})})},t.WS_Form.prototype.form_file=function(){var e=this;t('input[type="file"]:not([data-init-file])',this.form_canvas_obj).each(function(){var a=!1;if(void 0!==t(this).attr("data-preview")){var i=t(this).closest('[data-type="file"]').attr("data-id"),r=e.field_data_cache[i];switch(e.get_object_meta_value(r,"orientation",!1)){case"grid":var s=e.get_field_value_fallback(r.type,!1,"class_orientation_wrapper",[]),o=e.get_field_value_fallback(r.type,!1,"class_orientation_row",[]);s.push("wsf-file-preview");var n=s.join(" "),c=e.column_class_array(r,"orientation_breakpoint"),_=(c=o.concat(c)).join(" "),d="",l=" width: 100%; height: revert; margin: 20px 0 0 0;";break;case"horizontal":n="wsf-file-preview",_="";var h=e.get_object_meta_value(r,"file_preview_width",!1);d="display: inline-block; vertical-align: top; margin: 0 20px 0 0;"+(!1!==h?" width: "+h+";":""),l="width: revert; height: revert; max-width: 100%; margin: 20px 0 0 0;";break;default:n="wsf-file-preview",_="",d="",l="width: 100%; height: revert; max-width: 100%; margin: 20px 0 0 0;"}a=t("<div"+(""!=n?' class="'+n+'"':"")+"></div>");t(this).closest("[data-type]").append(a)}t(this).change(function(){var i=t(this).closest('[data-type="file"]'),r=i.attr("data-id"),s=i.attr("data-repeatable-index"),o=void 0!==s?"-repeat-"+s:"",n=t(this)[0].files,c=t("#"+e.form_id_prefix+"label-"+r+o,this.form_canvas_obj);if(void 0!==c.attr("data-label-target"))switch(c.attr("data-label-target")){case"span":c=t("span",c).first()}if(0==n.length)var h=e.field_data_cache[r].label;else{for(var f=[],p=0;p<n.length;p++)f.push(n[p].name);h=f.join(", ")}c.html(e.html_encode(h)),!1!==a&&e.form_file_preview(n,a,_,d,l)}),t(this).attr("data-init-file","")})},t.WS_Form.prototype.form_file_preview=function(e,a,i,r,s){var o=[],n="<div"+(""!=i?' class="'+i+'"':"")+(""!=r?' style="'+r+'"':"")+">";a.html("");for(var c in e)if(e.hasOwnProperty(c)){var _=e[c];switch(_.type){case"image/apng":case"image/bmp":case"image/gif":case"image/jpeg":case"image/png":case"image/svg+xml":case"image/tiff":case"image/webp":case"image/x-icon":o[c]=new FileReader,o[c].wsf_file_index=c,o[c].onload=function(i){var r=this.wsf_file_index,o=i.target.result,c=e[r].name,_=t("<img />");_.attr("src",o),_.attr("alt",c),_.attr("title",c),_.attr("style",s),a.append(n+_[0].outerHTML+"</div>")},o[c].readAsDataURL(_);break;case"video/avi":case"video/mp4":case"video/ogg":case"video/ogm":case"video/ogv":case"video/webm":var d=URL.createObjectURL(_),l=t("<video controls />");l.attr("src",d),l.attr("style",s),l.html(this.language("error_not_supported_video")),a.append(n+l[0].outerHTML+"</div>");break;case"audio/aac":case"audio/aacp":case"audio/flac":case"audio/mp4":case"audio/mpeg":case"audio/ogg":case"audio/wav":case"audio/webm":var h=URL.createObjectURL(_),f=t("<audio controls />");f.attr("src",h),f.attr("style",s+" height: 40px;"),f.html(this.language("error_not_supported_audio")),a.append(n+f[0].outerHTML+"</div>")}}},t.WS_Form.prototype.file_get_count_by_field_id=function(e){var a=t("#"+this.form_id_prefix+"field-"+e,this.form_canvas_obj),i=!!a.length&&a[0].files;return!1!==i?i.length:0},t.WS_Form.prototype.form_navigation=function(){var e=this,a=this.form.groups.length;this.form_canvas_obj.off("click",'[data-action="wsf-save"]').on("click",'[data-action="wsf-save"]',function(){e.form_post("save")}),this.form_canvas_obj.off("click",'[data-action="wsf-tab_next"]').on("click",'[data-action="wsf-tab_next"]',function(){void 0===t(this).attr("disabled")&&e.group_index_offset(t(this),1)}),t('[data-action="wsf-tab_next"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){if(t(this).attr("data-init-navigation",""),1==a)return t(this).attr("disabled",""),!0;var i=e.get_group_index(t(this));return!1===i||(i==a-1?(t(this).attr("disabled",""),!0):void 0)}),this.form_canvas_obj.off("click",'[data-action="wsf-tab_previous"]').on("click",'[data-action="wsf-tab_previous"]',function(){void 0===t(this).attr("disabled")&&e.group_index_offset(t(this),-1)}),t('[data-action="wsf-tab_previous"]:not([data-init-navigation])',this.form_canvas_obj).each(function(){if(t(this).attr("data-init-navigation",""),1==a)return t(this).attr("disabled",""),!0;var i=e.get_group_index(t(this));return!1===i||(0==i?(t(this).attr("disabled",""),!0):void 0)}),this.form_canvas_obj.off("click",'[data-action="wsf-reset"]').on("click",'[data-action="wsf-reset"]',function(t){t.preventDefault(),e.form_reset()}),this.form_canvas_obj.off("click",'[data-action="wsf-clear"]').on("click",'[data-action="wsf-clear"]',function(){e.form_clear()})},t.WS_Form.prototype.group_index_offset=function(e,a){var i=this.get_group_index(e)+a;this.group_index_set(i);var r=e.closest("[data-id]").attr("data-id"),s=this.field_data_cache[r],o=this.get_object_meta_value(s,"scroll_to_top",""),n=this.get_object_meta_value(s,"scroll_to_top_offset","0");n=""==n?0:parseInt(n,10);var c=this.form_canvas_obj.offset().top-n;switch(o){case"instant":t("html,body").scrollTop(c);break;case"smooth":var _=this.get_object_meta_value(s,"scroll_to_top_duration","0");_=""==_?0:parseInt(_,10),t("html,body").animate({scrollTop:c},_)}},t.WS_Form.prototype.group_index_set=function(e){if(this.form.groups.length<=1)return!1;var a=this.framework.tabs.public;if(void 0!==a.activate_js){var i=a.activate_js;if(""!=i){var r={form:"#"+this.form_obj_id,index:e},s=this.mask_parse(i,r);t.globalEval("(function($) { $(function() {"+s+"}); })(jQuery);"),this.cookie_set("tab_index",e)}}this.form_progress_tabs(e),this.log("log_group_index",e)},t.WS_Form.prototype.get_group_index=function(t){if(this.form.groups.length<=1)return!1;var e=t.closest("[data-group-index]");if(0==e.length)return!1;var a=e.first().attr("data-group-index");return null!=a&&parseInt(a,10)},t.WS_Form.prototype.get_section_id=function(t){var e=t.closest('[id^="'+this.form_id_prefix+'section-"]').attr("data-id");return!!e&&parseInt(e,10)},t.WS_Form.prototype.get_field_id_from_obj=function(t){var e=t.closest("[data-type]").attr("data-id");return!!e&&parseInt(e,10)},t.WS_Form.prototype.form_tracking=function(){for(var e in t.WS_Form.tracking)if(t.WS_Form.tracking.hasOwnProperty(e)){var a=t.WS_Form.tracking[e];if(this.get_object_meta_value(this.form,e,!1)&&void 0!==a.client_source){var i=a.client_source;if(void 0!==a.server_query_var){var r=a.server_query_var,s="";switch(i){case"query_var":if(void 0===a.client_query_var)break;var o=a.client_query_var;s=this.get_query_var(o);break;case"referrer":s=void 0!==document.referrer?document.referrer:"";break;case"pathname":s=void 0!==location.pathname?location.pathname:"";break;case"query_string":s=void 0!==location.search?location.search:"";break;case"os":if(void 0===window.navigator)break;s=void 0!==window.navigator.platform?window.navigator.platform:"";break;case"geo_location":if(!navigator.geolocation)break;var n=this;navigator.geolocation.getCurrentPosition(function(t){var e=t.coords.latitude+","+t.coords.longitude;n.form_geo_location_process(e),n.log("log_tracking_geo_location",e,"tracking")},function(e){n.form_geo_location_process(e.code),n.error("error_tracking_geo_location",t.WS_Form.debug_rendered?n.form_geo_location_get_error(e):"","tracking")});continue}this.form_add_hidden_input(r,this.html_encode(s))}}}},t.WS_Form.prototype.form_geo_location_process=function(t){this.form_add_hidden_input("wsf_geo_location",t)},t.WS_Form.prototype.form_geo_location_get_error=function(t){switch(t.code){case t.PERMISSION_DENIED:return this.language("debug_tracking_geo_location_permission_denied");case t.POSITION_UNAVAILABLE:return this.language("debug_tracking_geo_location_position_unavailable");case t.TIMEOUT:return this.language("debug_tracking_geo_location_timeout");default:return this.language("debug_tracking_geo_location_default")}},t.WS_Form.prototype.form_preview=function(){this.form_canvas_obj[0].hasAttribute("data-preview")&&this.form_add_hidden_input("wsf_preview","true")},t.WS_Form.prototype.form_spam_protection=function(){if(this.get_object_meta_value(this.form,"honeypot",!1)){var e=""!=this.form.published_checksum?this.form.published_checksum:"honeypot_unpublished_"+this.form_id,a=t.WS_Form.settings_plugin.framework,i=(t.WS_Form.frameworks.types[a],this.framework.fields.public),r=void 0!==i.honeypot_attributes?" "+i.honeypot_attributes.join(" "):"";this.form_add_hidden_input("field_"+e,"",!1,'autocomplete="off"'+r),t('[name="field_'+e+'"]',this.form_canvas_obj).css({position:"absolute",left:"-9999em"}),this.log("log_honeypot","","spam-protect")}},t.WS_Form.prototype.form_analytics=function(){this.get_object_meta_value(this.form,"analytics_google",!1)&&this.form_analytics_google()},t.WS_Form.prototype.form_analytics_google=function(e){var a=this,i=t.WS_Form.analytics.google.functions;if(void 0===e)e=(new Date).getTime();if((new Date).getTime()-e>this.timeout_analytics_google)return this.error("error_timeout_analytics_google","","analytics"),!1;var r=!1;for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];if(window[s]){r=!0,this.log(o.log_found,"","analytics");var n=this.get_object_meta_value(this.form,"analytics_google_event_field",!1),c=this.get_object_meta_value(this.form,"analytics_google_event_tab",!1);this.form_analytics_process("google",s,n,c),this.analytics_function.google=s;break}}r||setTimeout(function(){a.form_analytics_google(e)},this.timeout_interval)},t.WS_Form.prototype.form_analytics_process=function(t,e,a,i){a&&this.form_analytics_process_fields(t,e),i&&this.form.groups.length>0&&this.form_analytics_process_tabs(t,e)},t.WS_Form.prototype.form_analytics_process_tabs=function(e,a){var i=this,r=t.WS_Form.analytics[e].functions[a],s=t.WS_Form.analytics[e].label,o=r.label;t('[href^="#'+this.form_id_prefix+'tab-content-"]:not([data-init-analytics-tab])',this.form_canvas_obj).click(function(){t(this).attr("data-init-analytics-tab","");var r=t(this).closest("li").index();if(void 0===t(this).attr("data-analytics-event-fired")){var s=i.form.groups[r],o={action:i.js_string_encode(i.form.label),category:"Tab",label:i.js_string_encode(s.label)};i.form_analytics_event_fire(e,a,o),t(this).attr("data-analytics-event-fired","true")}}),i.log("log_analytics_event_tab",s+" ("+o+")","analytics")},t.WS_Form.prototype.form_analytics_process_fields=function(e,a){var i=this,r=t.WS_Form.analytics[e].functions[a],s=t.WS_Form.analytics[e].label,o=r.label;for(var n in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(n)){var c=this.field_data_cache[n].type,_=t.WS_Form.field_type_cache[c];if(void 0!==_.events){var d=_.events.event,l=this.field_data_cache[n].id,h=void 0!==_.submit_array&&_.submit_array;t('[data-type][data-id="'+l+'"]',this.form_canvas_obj).each(function(){var r=t(this).attr("data-repeatable-index"),s=void 0!==r?"["+r+"]":"";if(h)var o=t('[name="'+ws_form_settings.field_prefix+l+s+'[]"]:not([data-init-analytics-field])',i.form_canvas_obj);else o=t('[name="'+ws_form_settings.field_prefix+l+s+'"]:not([data-init-analytics-field])',i.form_canvas_obj);o.length&&(o.attr("data-init-analytics-field",""),o.on(d,function(){if(void 0===t(this).attr("data-analytics-event-fired")){var r=t(this).closest("[data-type]").attr("data-id"),s=i.field_data_cache[r],o=t.WS_Form.field_type_cache[s.type].events.event_category,n={action:i.js_string_encode(i.form.label),category:o,label:i.js_string_encode(s.label)};i.form_analytics_event_fire(e,a,n),t(this).attr("data-analytics-event-fired","true")}}))})}}i.log("log_analytics_event_field",s+" ("+o+")","analytics")},t.WS_Form.prototype.form_analytics_event_fire=function(e,a,i){var r=t.WS_Form.analytics[e].functions[a],s=t.WS_Form.analytics[e].label,o=t.WS_Form.analytics[e].functions[a].label,n=atob(r.analytics_event_function),c=this.mask_parse(n,i);"js"==a||"function"==typeof window[a]?(t.globalEval("(function($) {"+c+"})(jQuery);"),this.log("log_analytics_event_field_fired",s+" ("+o+") "+c,"analytics")):this.error("log_analytics_event_field_failed",s+" ("+o+") "+c,"analytics")},t.WS_Form.prototype.form_textarea=function(){var e=this;t('[data-textarea-type="tinymce"]',this.form_canvas_obj).each(function(){if("undefined"!=typeof wp&&void 0!==wp.editor&&void 0!==wp.editor.remove&&void 0!==wp.editor.initialize){var a=t(this).attr("id");switch(t(this).attr("data-textarea-toolbar")){case"compact":var i={tinymce:{toolbar1:ws_form_settings.tinymce_toolbar1_compact,toolbar2:ws_form_settings.tinymce_toolbar2_compact,toolbar3:ws_form_settings.tinymce_toolbar3_compact,toolbar4:ws_form_settings.tinymce_toolbar4_compact,plugins:ws_form_settings.tinymce_plugins_compact}};break;default:i={tinymce:{toolbar1:ws_form_settings.tinymce_toolbar1_full,toolbar2:ws_form_settings.tinymce_toolbar2_full,toolbar3:ws_form_settings.tinymce_toolbar3_full,toolbar4:ws_form_settings.tinymce_toolbar4_full,plugins:ws_form_settings.tinymce_plugins_full}}}i.quicktags=!0,i.tinymce.wpautop=!0,i.tinymce.init_instance_callback=function(a){a.on("keyup change input",function(i){t("#"+a.id,e.form_canvas_obj).val(wp.editor.getContent(a.id)).trigger(i.type)});var i=t("#"+a.id,e.form_canvas_obj),r=i.closest("[data-id]"),s=r.attr("data-id"),o=r.attr("data-repeatable-index"),n=void 0!==o?"-repeat-"+o:"";t("#"+e.form_id_prefix+"invalid-feedback-"+s+n,e.form_canvas_obj).before(i.detach())},wp.editor.remove(a),wp.editor.initialize(a,i)}}),t('[data-textarea-type="html"]',this.form_canvas_obj).each(function(){if("undefined"!=typeof wp&&void 0!==wp.codeEditor){var a=t(this).attr("id");t(".CodeMirror",e.form_canvas_obj).each(function(){t(this).remove()}),wp.codeEditor.initialize(a),t(".CodeMirror",e.form_canvas_obj).each(function(){t(this)[0].CodeMirror.on("keyup",function(a,i){var r=a.getValue(),s=a.getTextArea();t(s,e.form_canvas_obj).val(r).trigger("keyup")})})}})},t.WS_Form.prototype.textarea_set_value=function(e,a){e.filter("textarea").each(function(){var e=void 0!==t(this).attr("data-textarea-type")&&t(this).attr("data-textarea-type");if(!1!==e){var i=t(this).attr("id");switch(e){case"tinymce":if("undefined"==typeof wp)break;if(void 0===wp.editor)break;tinyMCE.get(i).setContent(a);break;case"html":if("undefined"==typeof wp)break;if(void 0===wp.CodeMirror)break;t(this).next().get(0).CodeMirror.getDoc().setValue(a)}}})},t.WS_Form.prototype.form_dedupe_value_scope=function(){var e=this;t("[data-value-scope]:not([data-init-value-scope])",this.form_canvas_obj).each(function(){t(this).closest("[data-repeatable]")&&(e.form_dedupe_value_scope_process(t(this),!0),t(this).change(function(){e.form_dedupe_value_scope_process(t(this),!1)}),t(this).attr("data-init-value-scope",""))})},t.WS_Form.prototype.form_dedupe_value_scope_process_all=function(){var e=this;t("[data-value-scope]",this.form_canvas_obj).each(function(){t(this).closest("[data-repeatable]")&&e.form_dedupe_value_scope_process(t(this),!1)})},t.WS_Form.prototype.form_dedupe_value_scope_process=function(e,a){var i=this,r=e.closest("[data-type]"),s=r.attr("data-type"),o=r.attr("data-id"),n=e.closest("[data-repeatable]");n.attr("data-id"),n.attr("data-repeatable-index");switch(s){case"select":case"price_select":a||t('[name^="'+ws_form_settings.field_prefix+o+'["] option[data-dedupe]',this.form_canvas_obj).removeAttr("data-dedupe").removeAttr("disabled"),t('[name^="'+ws_form_settings.field_prefix+o+'["]',this.form_canvas_obj).each(function(){var e=t(this).closest("[data-repeatable]"),a=e.attr("data-id"),r=e.attr("data-repeatable-index"),s=t(this).val();for(var n in"object"!=typeof s&&(s=[s]),s)if(s.hasOwnProperty(n)){var c=s[n];""!==c&&t('[id^="'+i.form_id_prefix+"section-"+a+'-"]:not([data-repeatable-index="'+r+'"])').each(function(){var e=t('[name^="'+ws_form_settings.field_prefix+o+'["]',t(this));t('option[value="'+c+'"]:not([data-dedupe])',e).prop("selected",!1).attr("disabled","").attr("data-dedupe","")})}});break;case"checkbox":case"radio":case"price_checkbox":case"price_radio":a||t('[name^="'+ws_form_settings.field_prefix+o+'["][data-dedupe]',this.form_canvas_obj).removeAttr("data-dedupe").removeAttr("disabled"),t('[name^="'+ws_form_settings.field_prefix+o+'["]:checked',this.form_canvas_obj).each(function(){if(t(this).is(":checked")){var e=t(this).closest("[data-repeatable]"),a=e.attr("data-id"),r=e.attr("data-repeatable-index"),s=t(this).attr("value");t('[id^="'+i.form_id_prefix+"section-"+a+'-"]:not([data-repeatable-index="'+r+'"])').each(function(){t('[name^="'+ws_form_settings.field_prefix+o+'["][value="'+s+'"]',t(this)).prop("checked",!1).attr("disabled","").attr("data-dedupe","")})}})}},t.WS_Form.prototype.form_section_repeatable=function(){var e=this.get_section_id_repeatable_array();for(var a in e)if(e.hasOwnProperty(a)){for(var i=this.section_data_cache[a],r=e[a],s=this.get_section_repeat_min(i),o=this.get_section_repeat_max(i,s),n=this.get_section_repeat_default(i,s,o),c=t('[data-repeatable][data-id="'+a+'"]',this.form_canvas_obj).first(),_=0;_<n-r;_++)this.section_clone(c);this.section_repeatable_navigation_render(a),this.section_repeatable_navigation_events(a),this.section_repeatable_navigation_enable_disable(a),this.section_repeatable_labels(a),this.form_canvas_obj.trigger("wsf-section-repeatable-"+a)}this.form_canvas_obj.trigger("wsf-section-repeatable")},t.WS_Form.prototype.section_repeatable_navigation_render=function(e){var a=this,i=["move-up","move-down","drag"],r=t('[data-repeatable][data-id="'+e+'"]');for(var s in i)if(i.hasOwnProperty(s)){var o=i[s];t('[data-action="wsf-section-'+o+'-button"]:not([data-repeatable-section-id])',r).attr("data-repeatable-section-id",e)}var n={circle:{add:'<path d="M13.7 2.3C12.1.8 10.1 0 8 0S3.9.8 2.3 2.3 0 5.9 0 8s.8 4.1 2.3 5.7S5.9 16 8 16s4.1-.8 5.7-2.3S16 10.1 16 8s-.8-4.1-2.3-5.7zM8 14.8c-3.7 0-6.8-3-6.8-6.8s3-6.8 6.8-6.8 6.8 3 6.8 6.8-3.1 6.8-6.8 6.8zm.6-7.4h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0s4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16zM8 1.2c-3.7 0-6.8 3-6.8 6.8s3 6.8 6.8 6.8 6.8-3 6.8-6.8S11.7 1.2 8 1.2zm3.4 6.2H4.6v1.2h6.9V7.4z"/>',"move-up":'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0s4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16zM8 1.2c-3.7 0-6.8 3-6.8 6.8s3 6.8 6.8 6.8 6.8-3 6.8-6.8S11.7 1.2 8 1.2zm4.3 7.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 0c2.1 0 4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16s-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0zm0 14.8c3.7 0 6.8-3 6.8-6.8s-3-6.8-6.8-6.8S1.2 4.3 1.2 8s3.1 6.8 6.8 6.8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 0c2.1 0 4.1.8 5.7 2.3S16 5.9 16 8s-.8 4.1-2.3 5.7S10.1 16 8 16s-4.1-.8-5.7-2.3S0 10.1 0 8s.8-4.1 2.3-5.7S5.9 0 8 0zm0 14.8c3.7 0 6.8-3 6.8-6.8s-3-6.8-6.8-6.8S1.2 4.3 1.2 8s3.1 6.8 6.8 6.8zm-4-4.7h8v1.3H4v-1.3zm0-2.7h8v1.3H4V7.4zm0-2.8h8v1.3H4V4.6z"/>',reset:'<path d="M8,0 C10.1,0 12.1,0.8 13.7,2.3 C15.3,3.8 16,5.9 16,8 C16,10.1 15.2,12.1 13.7,13.7 C12.2,15.3 10.1,16 8,16 C5.9,16 3.9,15.2 2.3,13.7 C0.7,12.2 0,10.1 0,8 C0,5.9 0.8,3.9 2.3,2.3 C3.8,0.7 5.9,0 8,0 Z M8,14.8 C11.7,14.8 14.8,11.8 14.8,8 C14.8,4.2 11.8,1.2 8,1.2 C4.2,1.2 1.2,4.3 1.2,8 C1.2,11.7 4.3,14.8 8,14.8 Z M8,4 C6.5,4 5.2,4.8 4.55,6.05 L4,5.5 L4,7.5 L6,7.5 L5.25,6.75 C5.75,5.75 6.8,5 8,5 C9.65,5 11,6.35 11,8 C11,9.65 9.65,11 8,11 C7.1,11 6.3,10.6 5.75,9.95 L5,10.6 C5.7,11.45 6.8,12 8,12 C10.2,12 12,10.2 12,8 C12,5.8 10.2,4 8,4 Z"/>',clear:'<path d="M13.7,2.3 C12.1,0.8 10.1,0 8,0 C5.9,0 3.9,0.8 2.3,2.3 C0.7,3.8 0,5.9 0,8 C0,10.1 0.8,12.1 2.3,13.7 C3.8,15.3 5.9,16 8,16 C10.1,16 12.1,15.2 13.7,13.7 C15.3,12.2 16,10.1 16,8 C16,5.9 15.2,3.9 13.7,2.3 Z M8,14.8 C4.3,14.8 1.2,11.8 1.2,8 C1.2,4.2 4.2,1.2 8,1.2 C11.8,1.2 14.8,4.2 14.8,8 C14.8,11.8 11.7,14.8 8,14.8 Z M8,7.15147186 L9.97989899,5.17157288 L10.8284271,6.02010101 L8.84852814,8 L10.8284271,9.97989899 L9.97989899,10.8284271 L8,8.84852814 L6.02010101,10.8284271 L5.17157288,9.97989899 L7.15147186,8 L5.17157288,6.02010101 L6.02010101,5.17157288 L8,7.15147186 Z"/>'},"circle-solid":{add:'<path d="M13.7 2.3C12.1.8 10.1 0 8 0S3.9.8 2.3 2.3C.7 3.8 0 5.9 0 8s.8 4.1 2.3 5.7C3.8 15.3 5.9 16 8 16s4.1-.8 5.7-2.3C15.3 12.2 16 10.1 16 8s-.8-4.1-2.3-5.7zM8.6 7.4h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0s4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16zm3.4-8.6H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16c-2.1 0-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0s4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16zm4.3-6.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 0c2.1 0 4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16s-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 0c2.1 0 4.1.8 5.7 2.3C15.3 3.8 16 5.9 16 8s-.8 4.1-2.3 5.7C12.2 15.3 10.1 16 8 16s-4.1-.8-5.7-2.3C.7 12.2 0 10.1 0 8s.8-4.1 2.3-5.7C3.8.7 5.9 0 8 0zm4 10.1H4v1.3h8v-1.3zm0-2.7H4v1.3h8V7.4zm0-2.8H4v1.3h8V4.6z"/>',reset:'<path d="M8,0 C10.1,0 12.1,0.8 13.7,2.3 C15.3,3.8 16,5.9 16,8 C16,10.1 15.2,12.1 13.7,13.7 C12.2,15.3 10.1,16 8,16 C5.9,16 3.9,15.2 2.3,13.7 C0.7,12.2 0,10.1 0,8 C0,5.9 0.8,3.9 2.3,2.3 C3.8,0.7 5.9,0 8,0 Z M8,4 C6.5,4 5.2,4.8 4.55,6.05 L4,5.5 L4,7.5 L6,7.5 L5.25,6.75 C5.75,5.75 6.8,5 8,5 C9.65,5 11,6.35 11,8 C11,9.65 9.65,11 8,11 C7.1,11 6.3,10.6 5.75,9.95 L5,10.6 C5.7,11.45 6.8,12 8,12 C10.2,12 12,10.2 12,8 C12,5.8 10.2,4 8,4 Z"/>',clear:'<path d="M8,0 C10.1,0 12.1,0.8 13.7,2.3 C15.3,3.8 16,5.9 16,8 C16,10.1 15.2,12.1 13.7,13.7 C12.2,15.3 10.1,16 8,16 C5.9,16 3.9,15.2 2.3,13.7 C0.7,12.2 0,10.1 0,8 C0,5.9 0.8,3.9 2.3,2.3 C3.8,0.7 5.9,0 8,0 Z M9.97989899,5.17157288 L8,7.15147186 L6.02010101,5.17157288 L5.17157288,6.02010101 L7.15147186,8 L5.17157288,9.97989899 L6.02010101,10.8284271 L8,8.84852814 L9.97989899,10.8284271 L10.8284271,9.97989899 L8.84852814,8 L10.8284271,6.02010101 L9.97989899,5.17157288 Z"/>'},square:{add:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm.6 6.2h2.8v1.2H8.6v2.8H7.4V8.6H4.6V7.4h2.8V4.6h1.2v2.8z"/>',delete:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm3.4 6.2H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm4.3 7.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M8 16H0V0h16v16H8zM8 1.2H1.2v13.6h13.6V1.2H8zm-4 8.9h8v1.3H4v-1.3zm0-2.7h8v1.3H4V7.4zm0-2.8h8v1.3H4V4.6z"/>',reset:'<path d="M8,16 L0,16 L0,8 L0,0 L8,0 L16,0 L16,8 L16,16 L8,16 Z M8,1.2 L1.2,1.2 L1.2,8 L1.2,14.8 L8,14.8 L14.8,14.8 L14.8,8 L14.8,1.2 L8,1.2 Z M8,4 C6.5,4 5.2,4.8 4.55,6.05 L4,5.5 L4,7.5 L6,7.5 L5.25,6.75 C5.75,5.75 6.8,5 8,5 C9.65,5 11,6.35 11,8 C11,9.65 9.65,11 8,11 C7.1,11 6.3,10.6 5.75,9.95 L5,10.6 C5.7,11.45 6.8,12 8,12 C10.2,12 12,10.2 12,8 C12,5.8 10.2,4 8,4 Z"/>',clear:'<path d="M8,16 L0,16 L0,8 L0,0 L8,0 L16,0 L16,8 L16,16 L8,16 Z M8,1.2 L1.2,1.2 L1.2,8 L1.2,14.8 L8,14.8 L14.8,14.8 L14.8,8 L14.8,1.2 L8,1.2 Z M8,7.15147186 L9.97989899,5.17157288 L10.8284271,6.02010101 L8.84852814,8 L10.8284271,9.97989899 L9.97989899,10.8284271 L8,8.84852814 L6.02010101,10.8284271 L5.17157288,9.97989899 L7.15147186,8 L5.17157288,6.02010101 L6.02010101,5.17157288 L8,7.15147186 Z"/>'},"square-solid":{add:'<path d="M16 0v16H0V0h16zM8.6 4.6H7.4v2.8H4.6v1.2h2.8v2.8h1.2V8.6h2.8V7.4H8.6V4.6z"/>',delete:'<path d="M8 16H0V0h16v16H8zm3.4-8.6H4.6v1.2h6.9V7.4h-.1z"/>',"move-up":'<path d="M8 16H0V0h16v16H8zm4.3-6.9L8 4.7 3.7 9.1l.9.9L8 6.5l3.4 3.4.9-.8z"/>',"move-down":'<path d="M8 16H0V0h16v16H8zM3.7 6.9L8 11.3 12.3 7l-.9-.9L8 9.5 4.6 6.1l-.9.8z"/>',drag:'<path d="M16 0v16H0V0h16zm-4 10.1H4v1.3h8v-1.3zm0-2.7H4v1.3h8V7.4zm0-2.8H4v1.3h8V4.6z"/>',reset:'<path d="M16,0 L16,16 L0,16 L0,0 L16,0 Z M8,4 C6.5,4 5.2,4.8 4.55,6.05 L4,5.5 L4,7.5 L6,7.5 L5.25,6.75 C5.75,5.75 6.8,5 8,5 C9.65,5 11,6.35 11,8 C11,9.65 9.65,11 8,11 C7.1,11 6.3,10.6 5.75,9.95 L5,10.6 C5.7,11.45 6.8,12 8,12 C10.2,12 12,10.2 12,8 C12,5.8 10.2,4 8,4 Z"/>',clear:'<path d="M16,0 L16,16 L0,16 L0,0 L16,0 Z M9.97989899,5.17157288 L8,7.15147186 L6.02010101,5.17157288 L5.17157288,6.02010101 L7.15147186,8 L5.17157288,9.97989899 L6.02010101,10.8284271 L8,8.84852814 L9.97989899,10.8284271 L10.8284271,9.97989899 L8.84852814,8 L10.8284271,6.02010101 L9.97989899,5.17157288 Z"/>'}};t("[data-section-icons]",r).each(function(){if(""===t(this).html()){var e=[],r=t(this).closest("[data-id]").attr("data-id"),s=a.field_data_cache[r],o=t(this).attr("data-repeatable-section-id");void 0===o&&(a.error("error_section_icon_no_section"),o=0),t(this).attr("data-repeatable-section-id",!1);var c=t(this).closest("[data-repeatable]"),_=c.length&&c.attr("data-id")==o,d=a.get_object_meta_value(s,"section_icons_style",[]);t(this).addClass("wsf-section-icons-"+d);var l=parseInt(a.get_object_meta_value(s,"section_icons_size","24"),10);isNaN(l)&&(l=24),l<1&&(l=1);var h=a.get_object_meta_value(s,"section_icons_color_on","#000"),f=a.get_object_meta_value(s,"section_icons_color_off","#888"),p=a.get_object_meta_value(s,"horizontal_align","right"),m=ws_form_settings.skin_grid_gutter/4,v=a.get_object_meta_value(s,"section_icons",[]);for(var u in v)if(v.hasOwnProperty(u)){var g=v[u],b=void 0!==g.section_icons_type&&g.section_icons_type;if(!1!==b){var y=void 0!==g.section_icons_label?g.section_icons_label:a.language("section_icon_"+b);if(-1===i.indexOf(b)||_){var w='<span class="wsf-section-icon-text">'+a.language("section_icon_"+b)+"</span>",k="drag"==b?"move":"pointer";switch(d){case"text":var j=w;break;case"custom":""==(j=a.get_object_meta_value(s,"section_icons_html_"+b,""))&&(j=w);break;default:var x=void 0!==n[d]&&void 0!==n[d][b]&&n[d][b];j=!1!==x?'<svg class="wsf-section-icon" height="'+l+'" width="'+l+'" viewBox="0 0 16 16" style="display: block; height: auto; max-width: 100%;">'+x+"</svg>":w}e.push('<li data-action="wsf-section-'+b+'-icon" class="wsf-section-'+b+'" style="cursor: '+k+"; margin: "+(u>0?ws_form_settings.rtl?"0 "+m+"px 0 0":"0 0 0 "+m+"px":"0")+'; padding: 0;" title="'+a.html_encode(y)+'" aria-label="'+a.html_encode(y)+'" role="button" data-color-on="'+h+'" data-color-off="'+f+'" data-repeatable-section-id="'+o+'">'+j+"</li>")}else a.error("error_section_icon_not_in_own_section",b)}}t(this).html('<ul class="wsf-section-icons" style="display: flex; justify-content: '+p+'; list-style-type: none; margin: 0; padding: 0; user-select: none;">'+e.join("")+"</ul>")}})},t.WS_Form.prototype.section_repeatable_navigation_enable_disable=function(e){var a=this,i=t('[data-repeatable][data-id="'+e+'"]',this.form_canvas_obj).length,r=this.section_data_cache[e],s=this.get_section_repeat_min(r),o=this.get_section_repeat_max(r,s);t('[data-action="wsf-section-add-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-add-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).each(function(){!1!==o&&i>=o?a.section_action_off(t(this),"add"):a.section_action_on(t(this),"add")}),t('[data-action="wsf-section-delete-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-delete-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).each(function(){i<=s?a.section_action_off(t(this),"delete"):a.section_action_on(t(this),"delete")}),t('[data-action="wsf-section-move-up-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-move-up-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).each(function(r){var s=a.section_get_index(t(this),e);1==i||0==s?a.section_action_off(t(this),"move-up"):a.section_action_on(t(this),"move-up")}),t('[data-action="wsf-section-move-down-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-move-down-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).each(function(r){var s=a.section_get_index(t(this),e);1==i||s==i-1?a.section_action_off(t(this),"move-down"):a.section_action_on(t(this),"move-down")}),t('[data-action="wsf-section-drag-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-drag-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).each(function(){1==i?a.section_action_off(t(this),"drag"):a.section_action_on(t(this),"drag")}),this.form_dedupe_value_scope_process_all()},t.WS_Form.prototype.section_repeatable_navigation_events=function(e){var a=this,i=(t('[data-repeatable][data-id="'+e+'"]',this.form_canvas_obj).length,this.section_data_cache[e]),r=this.get_section_repeat_min(i);this.get_section_repeat_max(i,r);t('[data-action="wsf-section-add-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-add-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){if(e.preventDefault(),!t(this).hasClass("wsf-section-add-disabled")){var i=t(this).attr("data-repeatable-section-id");if(void 0!==i){var r=t(this).closest("[data-repeatable]");if(r.length&&r.attr("data-id")==i)a.section_clone(t(this).closest("[data-repeatable]"));else{var s=t('[data-repeatable][data-id="'+i+'"]',a.form_canvas_obj).last();a.section_clone(s)}a.section_add_init(i),a.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+i)}else a.error("error_section_button_no_section")}}).attr("data-init-repeatable-section",""),t('[data-action="wsf-section-delete-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-delete-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){if(e.preventDefault(),!t(this).hasClass("wsf-section-delete-disabled")){var i=t(this).attr("data-repeatable-section-id");if(void 0!==i){var r=t(this).closest("[data-repeatable]");if(r.length&&r.attr("data-id")==i)t(this).closest("[data-repeatable]").remove();else t('[data-repeatable][data-id="'+i+'"]',a.form_canvas_obj).last().remove();a.section_remove_init(i),a.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+i)}else a.error("error_section_button_no_section")}}).attr("data-init-repeatable-section",""),t('[data-action="wsf-section-move-up-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-move-up-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){if(e.preventDefault(),!t(this).hasClass("wsf-section-move-up-disabled")){var i=t(this).attr("data-repeatable-section-id"),r=t(this).closest("[data-repeatable]");r.prev().insertAfter(r),a.section_repeatable_navigation_enable_disable(i),a.section_repeatable_labels(i)}}).attr("data-init-repeatable-section-yes",""),t('[data-action="wsf-section-move-down-button"][data-repeatable-section-id="'+e+'"], [data-action="wsf-section-move-down-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){if(e.preventDefault(),!t(this).hasClass("wsf-section-move-down-disabled")){var i=t(this).attr("data-repeatable-section-id"),r=t(this).closest("[data-repeatable]");r.next().insertBefore(r),a.section_repeatable_navigation_enable_disable(i),a.section_repeatable_labels(i)}}).attr("data-init-repeatable-section",""),t('[data-action="wsf-section-drag-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("mouseenter touchstart",function(e){if(e.preventDefault(),!t(this).hasClass("wsf-section-drag-disabled")){var i=t(this).closest("[data-repeatable]");if(!1===a.section_repeatable_dragged){var r=i.attr("data-id");i.parent(":not(.ui-sortable)").sortable({items:'> [data-repeatable][data-id="'+r+'"]',cancel:".wsf-section-repeatable-cancel",cursor:"move",handle:".wsf-section-drag",tolerance:"pointer",containment:"parent",start:function(t,e){a.section_repeatable_dragged=!0},stop:function(t,e){a.section_repeatable_dragged=!1,a.section_repeatable_navigation_enable_disable(r),a.section_repeatable_labels(r)}})}}}).on("mouseleave touchstart",function(e){e.preventDefault(),t(this).hasClass("wsf-section-drag-disabled")||!1===a.section_repeatable_dragged&&t(this).closest("[data-repeatable]").parent(".ui-sortable").sortable("destroy")}).attr("data-init-repeatable-section",""),t('[data-action="wsf-section-reset-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){e.preventDefault();var i=t(this).attr("data-repeatable-section-id");if(void 0!==i){var r=t(this).closest("[data-repeatable]"),s=!!(r.length&&r.attr("data-id")==i)&&r.attr("data-repeatable-index");a.section_fields_reset(i,!1,s)}else a.error("error_section_button_no_section")}).attr("data-init-repeatable-section",""),t('[data-action="wsf-section-clear-icon"][data-repeatable-section-id="'+e+'"]',this.form_canvas_obj).not("[data-init-repeatable-section]").on("click",function(e){e.preventDefault();var i=t(this).attr("data-repeatable-section-id");if(void 0!==i){var r=t(this).closest("[data-repeatable]"),s=!!(r.length&&r.attr("data-id")==i)&&r.attr("data-repeatable-index");a.section_fields_reset(i,!0,s)}else a.error("error_section_button_no_section")}).attr("data-init-repeatable-section","")},t.WS_Form.prototype.section_repeatable_labels=function(e){var a=this.section_data_cache[e],i=this.get_object_meta_value(a,"render_label","on"),r=this.get_object_meta_value(a,"section_repeat_label","on");i&&!r&&t('[data-repeatable][data-id="'+e+'"]',this.form_canvas_obj).each(function(e){e?t("> legend",t(this)).hide():t("> legend",t(this)).show()})},t.WS_Form.prototype.section_get_index=function(e,a){var i=0,r=e.closest("[data-repeatable]");return t('[data-repeatable][data-id="'+a+'"]',this.form_canvas_obj).each(function(e){if(t(this).attr("id")===r.attr("id"))return i=e,!1}),i},t.WS_Form.prototype.section_repeatable_hidden_field=function(){var e=this,a={},i=t("[data-repeatable]",this.form_canvas_obj);i.each(function(){var i=t(this).attr("data-id"),r=t(this).attr("data-repeatable-index");void 0===a["section_"+i]&&(a["section_"+i]=[]),a["section_"+i].push(r),e.form_canvas_obj.trigger("wsf-section-repeatable-"+i)}),this.form_add_hidden_input("wsf_form_section_repeatable_index",JSON.stringify(a),!1,!1,!0),i.length&&this.form_canvas_obj.trigger("wsf-section-repeatable")},t.WS_Form.prototype.get_section_id_repeatable_array=function(){var e=[];return t("[data-repeatable]",this.form_canvas_obj).each(function(){var a=t(this).attr("data-id");void 0===e[a]?e[a]=1:e[a]++}),e},t.WS_Form.prototype.section_action_off=function(e,a){if(e.addClass("wsf-section-"+a+"-disabled").filter(":button").attr("disabled",""),void 0!==e.attr("data-color-off")){e.css({cursor:"not-allowed"});var i=e.attr("data-color-off");t("svg path",e).attr({fill:i}),t("span.wsf-section-icon-text",e).css({color:i})}},t.WS_Form.prototype.section_action_on=function(e,a){if(e.removeClass("wsf-section-"+a+"-disabled").filter(":button").removeAttr("disabled"),void 0!==e.attr("data-color-on")){var i="wsf-section-drag-icon"===e.attr("data-action")?"move":"pointer";e.css({cursor:i});var r=e.attr("data-color-on");t("svg path",e).attr({fill:r}),t("span.wsf-section-icon-text",e).css({color:r})}},t.WS_Form.prototype.section_clone=function(e){var a=e.attr("data-id"),i=this.section_data_cache[a];i.meta.disabled_section=e.is(":disabled")?"on":"",i.meta.hidden_section=e.is('[style!="display:none;"][style!="display: none;"]')?"":"on";var r=this.get_section_html(i),s=t(r).insertAfter(e);for(var o in t("[data-init-conditional]",s).removeAttr("[data-init-conditional]"),t.WS_Form.field_type_cache)if(t.WS_Form.field_type_cache.hasOwnProperty(o)){var n=t.WS_Form.field_type_cache[o];if(!1===(void 0===n.multiple||n.multiple)){var c=t('[data-type="'+o+'"]',s);c.length&&c.remove()}}return s},t.WS_Form.prototype.section_add_init=function(t){this.section_repeatable_navigation_render(t),this.section_repeatable_navigation_events(t),this.section_repeatable_navigation_enable_disable(t),this.section_repeatable_labels(t),this.form_textarea(),this.form_select_all(),this.form_inputmask(),this.form_checkbox_min_max(),this.form_select_min_max(),this.form_select_ajax(),this.form_input_range(),this.form_date(),this.form_color(),this.form_signature(),this.form_rating(),this.form_dedupe_value_scope(),this.form_file(),this.form_character_word_count(),this.form_password_strength_meter(),this.form_ecommerce(),this.form_calc(!1,t),this.form_credit_card(),this.form_navigation(),this.form_analytics(),this.form_validate_real_time(),this.form_conditional(),this.form_progress(),this.form_required(),this.form_cascade(),this.form_bypass(!1,"form"),this.section_repeatable_hidden_field()},t.WS_Form.prototype.section_remove_init=function(e){if(this.signatures.length>0)for(var a in this.signatures)if(this.signatures.hasOwnProperty(a)){var i=this.signatures[a].name;t('[name="'+i+'"]',this.form_canvas_obj).length||this.signatures.splice(a,1)}this.section_repeatable_navigation_enable_disable(e),this.section_repeatable_labels(e),this.form_validate_real_time_process(),this.form_progress_process(),this.section_repeatable_hidden_field(),this.form_calc(!1,e)},t.WS_Form.prototype.form_progress=function(){var e=this,a=this.get_field_value_fallback("progress",!1,"class_complete",[]);this.progress_class_complete=a.join(" ");var i=this.get_field_value_fallback("progress",!1,"class_incomplete",[]);this.progress_class_incomplete=i.join(" "),t("[data-required]:not([data-init-required])",this.form_canvas_obj).each(function(){var a=t(this).closest("[data-id]").attr("data-id"),i=e.field_data_cache[a].type,r=t.WS_Form.field_type_cache[i].events.event;t(this).on(r,function(){e.form_progress_process()})}),t("[data-progress-include]:not([data-init-required])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-progress-include");t(this).on(a,function(){e.form_progress_process()})}),this.form_progress_process(),this.api_call_progress_reset()},t.WS_Form.prototype.form_progress_process=function(){var e=this,a=[],i=0,r=0;t("[data-required]:not([data-required-bypass-section],[data-required-bypass])",this.form_canvas_obj).each(function(){var s=t(this).closest("[data-id]").attr("data-id"),o=e.field_data_cache[s].type,n=t(this).closest("[data-type]").attr("data-repeatable-index"),c=void 0!==n?"["+n+"]":"",_=ws_form_settings.field_prefix+s+c,d=!1;switch(o){case"radio":case"price_radio":if(void 0!==a[_])return;d=t(this)[0].checkValidity();break;case"signature":d=e.signature_get_response_by_name(_);break;case"email":d=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t(this).val());break;default:d=t(this)[0].checkValidity()}d&&r++,a[_]=!0,i++}),t("[data-progress-include]",this.form_canvas_obj).each(function(){t(this)[0].checkValidity()&&r++,i++});var s=i>0?Math.round(r/i*100):0;t('[data-progress-bar][data-source="form_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value(t(this),s)})},t.WS_Form.prototype.form_progress_set_value=function(e,a){var i=t("[data-progress-bar-value]",e);if(i.length||(i=e),e.is("progress")){var r=e.attr("min")?parseFloat(e.attr("min")):0,s=e.attr("max")?parseFloat(e.attr("max")):100;if(s-r<=0)return;var o=r+a/100*(s-r);o<r&&(o=r),o>s&&(o=s);var n=i.val()!=o;i.val(o),n&&i.trigger("change")}else{n=i.attr("data-value")!=a;i.attr("data-value",a).css("width",a+"%"),n&&i.trigger("change"),void 0!==e.attr("aria-valuenow")&&e.attr("aria-valuenow",a),void 0!==i.attr("aria-valuenow")&&i.attr("aria-valuenow",a)}100==a?(e.addClass(this.progress_class_complete),e.removeClass(this.progress_class_incomplete)):(e.removeClass(this.progress_class_complete),e.addClass(this.progress_class_incomplete));var c=e.closest("[data-id]").attr("data-id"),_=e.closest("[data-id]").attr("data-repeatable-index"),d=void 0!==_?"-repeat-"+_:"",l=this.field_data_cache[c],h=this.get_object_meta_value(l,"help","",!1,!1);if(-1!==h.indexOf("#progress")){var f={progress_remaining_percent:100-a+"%",progress_remaining:100-a,progress_percent:a+"%",progress:a},p=this.mask_parse(h,f);p=this.parse_variables_process(p).output;var m=this.form_id_prefix+"help-"+c+d;t("#"+m,this.form_canvas_obj).html(p)}},t.WS_Form.prototype.form_progress_tabs=function(e){var a=this,i=t('[data-source="tab_progress"]',this.form_canvas_obj);if(i.length){var r=this.form.groups.length;i.each(function(){var i=(e+1)/r*100;a.form_progress_set_value(t(this),Math.round(i))})}},t.WS_Form.prototype.form_signature=function(){var e=this,a=t('[data-type="signature"]:not([data-init-signature])',this.form_canvas_obj);if(!a.length)return!1;a.each(function(){t(this).attr("data-init-signature","");var a=t("canvas",t(this)),i=a[0],r=a.attr("name"),s=t(this).attr("data-id"),o=e.field_data_cache[s],n=e.get_object_meta_value(o,"required",!1);if(e.get_object_meta_value(o,"disabled",!1)){var c=e.get_field_value_fallback("signature",!1,"class_disabled",!1);!1!==c&&a.addClass(c.join(" ")),a.css({"pointer-events":"none"})}var _=a.attr("data-dot-size"),d=void 0!==a.attr("data-crop"),l=a.attr("data-pen-color"),h=void 0!==a.attr("data-mime")?a.attr("data-mime"):"image/png",f={maxWidth:_,penColor:l},p={signature:!1,canvas:a,canvas_element:i,name:r,mime:h,config:f,required:n,data_required:n,crop:d};if("image/jpeg"==h){var m=void 0!==a.attr("data-background-color")?a.attr("data-background-color"):"#ffffff";f.backgroundColor=m,p.background_color=m}e.signatures.push(p),e.signature_process(e.signatures[e.signatures.length-1])})},t.WS_Form.prototype.signature_process=function(e,a){var i=this;if("undefined"!=typeof SignaturePad){var r=this.framework.groups.public,s=(r.class_active,r.class_active),o=t(e.canvas_element,this.form_canvas_obj).closest('[id^="'+this.form_id_prefix+'tab-content-"]'),n=o.is(":visible");n||(s?o.addClass(s):o.show());var c=new SignaturePad(e.canvas_element,e.config);e.signature=c,this.signatures_by_name[e.name]=e,e.canvas.parent().find('[data-action="wsf-signature-clear"]').click(function(t){t.preventDefault(),e.signature.clear(),e.canvas.trigger("mouseup")}),t(document).keydown(function(t){e.canvas.is(":focus")&&27==t.keyCode&&e.signature.clear()}),t(window).resize(function(){i.signature_redraw(e.signature,e.canvas_element)}),i.signature_redraw(e.signature,e.canvas_element,!0),n||(s?o.removeClass(s):o.hide()),this.form_validate_real_time_process(!1)}},t.WS_Form.prototype.signature_redraw=function(t,e,a){if(void 0===a)a=!1;if(!a&&t.isEmpty()&&(a=!0),!a)var i=t.toDataURL();var r=Math.max(window.devicePixelRatio||1,1);e.width=e.offsetWidth*r,e.height=e.offsetHeight*r,e.getContext("2d").scale(r,r),a?t.clear():t.fromDataURL(i)},t.WS_Form.prototype.signatures_redraw=function(e,a,i){if(void 0===a)a=!1;if(void 0===i)i=!1;for(var r in this.signatures)if(this.signatures.hasOwnProperty(r)){var s=this.signatures[r];if(!1!==s.signature){var o=s.canvas_element,n=this.get_group_index(t(o,this.form_canvas_obj)),c=this.get_section_id(t(o,this.form_canvas_obj)),_=this.get_field_id_from_obj(t(o,this.form_canvas_obj));(!1!==e&&n==e||!1!==a&&a==c||i==_)&&this.signature_redraw(s.signature,o)}}},t.WS_Form.prototype.signatures_clear=function(){for(var t in this.signatures)if(this.signatures.hasOwnProperty(t)){var e=this.signatures[t];e.signature.clear(),e.canvas.trigger("mouseup")}},t.WS_Form.prototype.signature_clear_by_name=function(t){var e=void 0!==this.signatures_by_name[t]&&this.signatures_by_name[t];!1!==e&&(e.signature.clear(),e.canvas.trigger("mouseup"))},t.WS_Form.prototype.signature_get_response_by_name=function(t){var e=void 0!==this.signatures_by_name[t]&&this.signatures_by_name[t];return!1!==e&&!e.signature.isEmpty()},t.WS_Form.prototype.form_recaptcha=function(){var e=this,a=t("[data-recaptcha-type]",this.form_canvas_obj);if(!a.length)return!1;if(!t("#wsf-recaptcha-script-head").length){"var wsf_recaptcha_loaded = false;","<\/script>","<script>","function wsf_recaptcha_onload() {","wsf_recaptcha_loaded = true;","}","<\/script>",t("head").append('<script id="wsf-recaptcha-script-head">var wsf_recaptcha_loaded = false;<\/script><script>function wsf_recaptcha_onload() {wsf_recaptcha_loaded = true;}<\/script>')}var i=t('[data-recaptcha-type="v3_default"]',this.form_canvas_obj).length?3:2;if(!window.___grecaptcha_cfg&&!t("#wsf-recaptcha-script-body").length){switch(i){case 2:var r='<script id="wsf-recaptcha-script-body" src="https://www.google.com/recaptcha/api.js?onload=wsf_recaptcha_onload&render=explicit" async defer><\/script>';break;case 3:r='<script id="wsf-recaptcha-script-body" src="https://www.google.com/recaptcha/api.js?onload=wsf_recaptcha_onload&render='+t('[data-recaptcha-type="v3_default"]',this.form_canvas_obj).eq(0).attr("data-site-key")+'"><\/script>'}t("body").append(r)}this.recaptchas=[],this.recaptchas_v2_default=[],this.recaptchas_v2_invisible=[],this.recaptchas_v3_default=[],a.each(function(){var a=t(this).attr("name"),i=t(this).attr("id");if(void 0===i||""==i)return!1;var r=t(this).attr("data-site-key");if(void 0===r||""==r)return!1;var s=t(this).attr("data-recaptcha-type");void 0!==s&&-1!=["v2_default","v2_invisible","v3_default"].indexOf(s)||(s="default");var o=t(this).attr("data-type");void 0!==o&&-1!=["image","audio"].indexOf(o)||(o="image");var n=t(this).attr("data-language");void 0===n&&(n="");var c=t(this).attr("data-recaptcha-action");switch(void 0!==c&&""!=c||(c="ws_form_loaded_#form_id"),s){case"v2_default":var _=t(this).attr("data-size");void 0!==_&&-1!=["normal","compact","invisible"].indexOf(_)||(_="normal");var d=t(this).attr("data-theme");void 0!==d&&-1!=["light","dark"].indexOf(d)||(d="light");var l=e.get_field_value_fallback("recaptcha",!1,"class_invalid_label",[]),h=e.get_field_value_fallback("recaptcha",!1,"class_invalid_field",[]),f=e.get_field_value_fallback("recaptcha",!1,"class_invalid_invalid_feedback",[]),p=e.get_field_value_fallback("recaptcha",!1,"class_valid_label",[]),m=e.get_field_value_fallback("recaptcha",!1,"class_valid_field",[]),v=e.get_field_value_fallback("recaptcha",!1,"class_valid_invalid_feedback",[]),u=t(this),g=u.closest("[data-id]"),b=t("label",g),y=t("#"+this.form_id_prefix+"invalid-feedback-"+i,g,e.form_canvas_obj),w={sitekey:r,type:o,theme:d,size:_,callback:function(t){for(var a in b.addClass(p.join(" ")),b.removeClass(l.join(" ")),u.addClass(m.join(" ")),u.removeClass(h.join(" ")),y.addClass(v.join(" ")),y.removeClass(f.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(a)&&e.recaptchas_conditions[a]();e.form_validate_real_time_process(!1)},"expired-callback":function(){for(var t in b.addClass(l.join(" ")),b.removeClass(p.join(" ")),u.addClass(h.join(" ")),u.removeClass(m.join(" ")),y.addClass(f.join(" ")),y.removeClass(v.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)},"error-callback":function(){for(var t in b.addClass(l.join(" ")),b.removeClass(p.join(" ")),u.addClass(h.join(" ")),u.removeClass(m.join(" ")),y.addClass(f.join(" ")),y.removeClass(v.join(" ")),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)}};""!=n&&(w.hl=n);var k={id:!1,recaptcha_site_key:r,name:a,recaptcha_id:i,config:w,recaptcha_recaptcha_type:s,type:"v2_default"};e.recaptchas_v2_default.push(k),e.recaptcha_process(k);break;case"v2_invisible":var j=t(this).attr("data-badge");void 0!==j&&-1!=["bottomright","bottomleft","inline"].indexOf(j)||(j="bottomright");w={sitekey:r,badge:j,size:"invisible",callback:function(){for(var t in e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1),e.form_post("submit")},"expired-callback":function(){for(var t in e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)},"error-callback":function(){for(var t in e.error("error_recaptcha_v2_hidden"),e.recaptchas_conditions)e.recaptchas_conditions.hasOwnProperty(t)&&e.recaptchas_conditions[t]();e.form_validate_real_time_process(!1)}};""!=n&&(w.hl=n);k={id:!1,recaptcha_site_key:r,name:a,recaptcha_id:i,config:w,recaptcha_recaptcha_type:s,type:"v2_invisible"};e.recaptchas_v2_invisible.push(k),e.recaptcha_process(k);break;case"v3_default":k={id:!1,recaptcha_site_key:r,name:a,recaptcha_id:i,config:w={action:c=e.parse_variables_process(c).output},recaptcha_recaptcha_type:s,type:"v3_default"};e.recaptchas_v3_default.push(k),e.recaptcha_process(k)}})},t.WS_Form.prototype.recaptcha_process=function(e,a){var i=this;if(void 0===a)a=(new Date).getTime();if((new Date).getTime()-a>this.timeout_recaptcha)return this.error("error_timeout_recaptcha"),!1;if(wsf_recaptcha_loaded)switch(e.type){case"v2_default":case"v2_invisible":r=grecaptcha.render(e.recaptcha_id,e.config);e.id=r,this.form_validate_real_time_process(!1);break;case"v3_default":i=this;var r=grecaptcha.execute(e.recaptcha_site_key,e.config).then(function(a){if(!t('[data-recaptcha-response="'+e.recaptcha_id+'"]',this.form_canvas_obj).length){var s='<input type="hidden" data-recaptcha-response="'+r+'" name="g-recaptcha-response" value="" />';t("#"+r).html(s)}t('[data-recaptcha-response="'+r+'"]',i.form_canvas_obj).val(i.html_encode(a)),e.id=r,i.form_validate_real_time_process(!1),i.log("log_recaptcha_v3_action_fired",e.config.action)})}else{i=this;setTimeout(function(){i.recaptcha_process(e,a)},this.timeout_interval)}},t.WS_Form.prototype.recaptcha_v2_invisible_execute=function(){for(var t in this.recaptchas_v2_invisible)if(this.recaptchas_v2_invisible.hasOwnProperty(t)){var e=this.recaptchas_v2_invisible[t].id;grecaptcha.execute(e),this.form_validate_real_time_process(!1)}},t.WS_Form.prototype.recaptcha_reset=function(){for(var t in this.recaptchas)if(this.recaptchas.hasOwnProperty(t)){var e=this.recaptchas[t].id;grecaptcha.reset(e)}},t.WS_Form.prototype.recaptcha_get_response_by_name=function(t){for(var e in this.recaptchas)if(this.recaptchas.hasOwnProperty(e)){var a=this.recaptchas[e];if(a.name==t)return a.getResponse(a.id)}return""},t.WS_Form.prototype.form_legal=function(){var e=this;t("[data-wsf-legal]",this.form_canvas_obj).each(function(){var a=t(this).attr("data-wsf-legal-source");if(a)switch(a){case"termageddon":t(this).html("");var i=t(this).attr("data-wsf-termageddon-key");if(void 0!==i){var r=t(this).attr("data-wsf-termageddon-extra")?"?"+t(this).attr("data-wsf-termageddon-extra"):"",s=t(this),o=new XMLHttpRequest;o.onloadend=function(){switch(o.status){case 200:s.html(o.responseText);break;case 404:e.error("error_termageddon_404");break;default:e.error("error_termageddon")}},o.open("GET","https://app.termageddon.com/api/policy/"+i+r),o.send()}}})},t.WS_Form.prototype.form_rating=function(){var e=this,a=ws_form_settings.skin_grid_gutter/4;t("[data-rating]:not([data-init-rating])",this.form_canvas_obj).each(function(){t(this).attr("data-init-rating","");t(this).attr("name");var i=t(this).closest("[data-id]"),r=i.attr("data-id"),s=e.field_data_cache[r],o=parseInt(e.get_object_meta_value(s,"rating_max","5"),10);isNaN(o)&&(o=5),o<1&&(o=1);var n=t(this).val(),c=e.get_object_meta_value(s,"rating_icon","star"),_=parseInt(e.get_object_meta_value(s,"rating_size","24"),10);isNaN(_)&&(_=24),_<1&&(_=1);var d=t(this).attr("data-rating-color-off"),l=t(this).attr("data-rating-color-on"),h=void 0!==t(this).attr("readonly");if("custom"!=c){var f='<svg class="wsf-rating-icon" height="'+_+'" width="'+_+'" viewBox="0 0 16 16" style="display: block; height: auto; max-width: 100%;">';switch(c){case"heart":f+='<path d="M7.4,13.6c-0.3-0.4-1.2-1.1-1.9-1.7c-2.1-1.6-2.4-1.8-3.2-2.6C0.7,7.9,0,6.4,0,4.5 c0-1,0.1-1.3,0.3-1.9c0.5-1,1.1-1.7,2-2.1C2.9,0.1,3.2,0,4.2,0c1.1,0,1.3,0.1,1.9,0.5c0.8,0.4,1.5,1.3,1.7,1.9L8,2.8l0.2-0.5 c1.4-3,5.8-3,7.4,0.1c0.5,1,0.5,3.1,0.1,4.2c-0.6,1.5-1.6,2.7-4.1,4.5C10,12.2,8.2,14,8,14.3C7.9,14.6,8,14.3,7.4,13.6z" fill="'+d+'" />';break;case"check":f+='<path d="M7.3 14.2l-7.1-5.2 1.7-2.4 4.8 3.5 6.6-8.5 2.3 1.8z" fill="'+d+'" />';break;case"circle":f+='<path d="M0,8a8,8 0 1,0 16,0a8,8 0 1,0 -16,0" fill="'+d+'" />';break;case"flag":f+='<path d="M11.8 1.2s-2.7 1.3-5.3.3C3.6.5 2.3.9 1 2.5c-.2-.1-.5-.1-.7 0-.3.2-.4.6-.2.9l7.1 11.5c.1.2.4.3.6.3.1 0 .2 0 .4-.1.3-.2.4-.6.2-1l-3.2-5c1.2-1.5 2.6-1.9 5.4-.9 2.7.9 5.4-.4 5.4-.4l-4.2-6.6z" fill="'+d+'" />';break;case"smiley":f+='<path d="M8 16c4.4 0 8-3.6 8-8s-3.6-8-8-8-8 3.6-8 8 3.6 8 8 8zM8 1.5c3.6 0 6.5 2.9 6.5 6.5s-2.9 6.5-6.5 6.5S1.5 11.6 1.5 8 4.4 1.5 8 1.5zM4.6 5.6c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zm4.5 0c0-.6.4-1 1-1s1 .4 1 1-.4 1-1 1-1-.5-1-1zM11 9.3l1.3.8c-.9 1.5-2.5 2.4-4.3 2.4s-3.4-1-4.3-2.4L5 9.3c.6 1 1.7 1.7 3 1.7s2.4-.6 3-1.7z" fill="'+d+'" />';break;case"square":f+='<path d="M0 0h16v16H0z" fill="'+d+'" />';break;case"thumb":f+='<path d="M13.9 9.9c0 .7-.7 1.2-1.4 1.2.5.1 1.2.7 1.2 1.4s-.7 1.1-1.3 1.1h-.6c.5.1 1.1.8 1.1 1.4 0 .7-.7 1.1-1.4 1.1h-6c-2 0-3.5-1.6-3.5-3.6V8.7c0-1.4.8-2.9 2-3.3.9-.6 2.8-1.7 3.2-3.8V.1s2.6-.3 2.6 2.2c0 2.9-1.8 3.4-.4 3.5h2.2c.8 0 1.4.8 1.4 1.5s-.6 1.1-1.2 1.2h.6c.9 0 1.5.7 1.5 1.4z" fill="'+d+'" />';break;default:f+='<path d="M12.9 15.8c-1.6-1.2-3.2-2.5-4.9-3.7-1.6 1.3-3.3 2.5-4.9 3.7 0 0-.1 0-.1-.1.6-2 1.2-4 1.9-6C3.3 8.4 1.7 7.2 0 5.9h6C6.7 3.9 7.3 2 8 0h.1c.7 1.9 1.3 3.9 2 5.9H16V6c-1.6 1.3-3.2 2.5-4.9 3.8.6 1.9 1.3 3.9 1.8 6 .1-.1 0 0 0 0z" fill="'+d+'" />'}f+="</svg>"}else f=e.get_object_meta_value(s,"rating_icon_html","<span>*</span>");for(var p='<ul class="wsf-rating" style="display: flex; list-style: none; margin: 0; padding: 0; user-select: none; justify-content: '+e.get_object_meta_value(s,"horizontal_align","left")+'">',m=1;m<=o;m++)p+='<li class="wsf-rating-'+m+(m<=n?" wsf-rating-selected":"")+'" style="'+(h?"":"cursor: pointer; ")+"display:inline-block; padding: "+(m>1?ws_form_settings.rtl?"0 "+a+"px 0 0":"0 0 0 "+a+"px":"0")+'; margin: 0;" data-value="'+m+'" title="'+m+'">'+f+"</li>";p+="</ul>",t(this).after(p),t("ul.wsf-rating > li",i).each(function(e){t("svg.wsf-rating-icon path",t(this)).attr("fill",t(this).hasClass("wsf-rating-selected")?l:d)}),t(this).on("change input",function(){e.form_rating_process(t(this),Math.round(parseFloat(t(this).val(),10),0))}),h||(t("ul.wsf-rating > li",i).on("click touchstart",function(){var e=t("[data-rating]",t(this).closest("[data-id]")),a=parseInt(t(this).attr("data-value"),10);e.val(a).attr("data-value-old",a).trigger("change")}),t("ul.wsf-rating > li",i).on("mouseover",function(){var e=t("[data-rating]",t(this).closest("[data-id]")),a=e.attr("data-rating-color-off"),i=e.attr("data-rating-color-on");e.attr("data-value-old",e.val());var r=Math.round(parseFloat(t(this).attr("data-value"),10),0);e.val(r).trigger("input"),t(this).parent().children("li").each(function(e){e<r?(t(this).addClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",i)):(t(this).removeClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",a))})}).on("mouseout",function(){var e=t("[data-rating]",t(this).closest("[data-id]"));if(void 0!==e.attr("data-value-old")){var a=e.attr("data-value-old");e.val(a).trigger("input")}t(this).parent().children("li").each(function(e){t(this).removeClass("wsf-rating-hover"),t("svg.wsf-rating-icon path",t(this)).attr("fill",t(this).hasClass("wsf-rating-selected")?l:d)})}))})},t.WS_Form.prototype.form_rating_process=function(e,a){var i=e.attr("data-rating-color-off"),r=e.attr("data-rating-color-on");t("ul li",e.parent()).each(function(e){e<a?(t(this).addClass("wsf-rating-selected"),t("svg.wsf-rating-icon path",t(this)).attr("fill",r)):(t(this).removeClass("wsf-rating-selected"),t("svg.wsf-rating-icon path",t(this)).attr("fill",i))})},t.WS_Form.prototype.form_required=function(){var e=this;if(!this.get_object_meta_value(this.form,"label_required",!1))return!1;if(""==(a=this.get_object_meta_value(this.form,"label_mask_required","",!0,!0))){var a,i=t.WS_Form.settings_plugin.framework,r=(t.WS_Form.frameworks.types[i],this.framework.fields.public);if(void 0===r.mask_required_label)return!1;if(""==(a=r.mask_required_label))return!1}t("label",this.form_canvas_obj).each(function(){var i=t(this).attr("for");if(void 0!==i){var r=t('[id="'+i+'"]',e.form_canvas_obj);if(r.length&&void 0===r.attr("data-init-required")){var s=void 0!==r.attr("data-required"),o=t(this).attr("data-label-required-id");if(void 0!==o&&!1!==o)var n=t("#"+o,e.form_canvas_obj);else n=t(this);var c=t(".wsf-required-wrapper",n);if(!c.length&&s){var _=n.children("div,[name]").first();_.length?_.before('<span class="wsf-required-wrapper"></span>'):n.append('<span class="wsf-required-wrapper"></span>'),c=t(".wsf-required-wrapper",n)}s?(c.html(a),r.attr("data-init-required","")):(c.html(""),r.removeAttr("data-init-required"))}}})},t.WS_Form.prototype.form_bypass=function(e,a,i){var r=this,s=t([]);if(void 0===i)i=this.form_canvas_obj;var o={required:{bypass:"data-required-bypass",not:'[type="hidden"]'},"aria-required":{bypass:"data-aria-required-bypass",not:'[type="hidden"]'},min:{bypass:"data-min-bypass",not:'[type="hidden"],[type="range"]'},max:{bypass:"data-max-bypass",not:'[type="hidden"],[type="range"]'},minlength:{bypass:"data-minlength-bypass",not:'[type="hidden"]'},maxlength:{bypass:"data-maxlength-bypass",not:'[type="hidden"]'},pattern:{bypass:"data-pattern-bypass",not:'[type="hidden"]'},step:{bypass:"data-step-bypass",not:'[type="hidden"],[type="range"]'},"data-ecommerce-price":{bypass:"data-ecommerce-price-bypass",not:"[data-ecommerce-persist]"},"data-ecommerce-cart-price":{bypass:"data-ecommerce-cart-price-bypass",not:"[data-ecommerce-persist]"}};for(var n in o)if(o.hasOwnProperty(n)){var c=o[n],_=c.bypass,d=c.not;"field"!==a&&(t('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"] ['+_+"-section]:not("+d+")",i).attr(n,function(){return t(this).attr(_+"-section")}).removeAttr(_+"-section"),t('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] ['+n+"]:not("+d+'), [id^="'+this.form_id_prefix+'section-"][style="display: none;"] ['+n+"]:not("+d+")").attr(_+"-section",function(){return t(this).attr(n)}).removeAttr(n)),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"] ['+_+"]:not("+d+")",i).attr(n,function(){return t(this).attr(""+_)}).removeAttr(""+_),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"] ['+n+"]:not("+d+'), [id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"] ['+n+"]:not("+d+")",i).attr(""+_,function(){return t(this).attr(n)}).removeAttr(n)}"field"!==a&&(t('[id^="'+this.form_id_prefix+'section-"][style!="display:none;"][style!="display: none;"] [name]:not([type="hidden"])',i).each(function(){var e=t(this).closest("[data-id]").attr("data-id");void 0!==r.validation_message_cache[e]&&t(this)[0].willValidate&&t(this)[0].setCustomValidity(r.validation_message_cache[e]),void 0===t(this).attr("data-hidden-bypass")&&t(this).removeAttr("data-hidden-section")}),t('[id^="'+this.form_id_prefix+'section-"][style="display:none;"] [name]:not([type="hidden"]), [id^="'+this.form_id_prefix+'section-"][style="display: none;"] [name]:not([type="hidden"])').each(function(){var e=t(this).closest("[data-id]").attr("data-id");""!==t(this)[0].validationMessage&&(r.validation_message_cache[e]=t(this)[0].validationMessage,s.push(t(this))),void 0===t(this).attr("data-hidden-bypass")&&t(this).attr("data-hidden-section","")})),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style!="display:none;"][style!="display: none;"] [name]:not([type="hidden"])',i).each(function(){var e=t(this).closest("[data-id]").attr("data-id");void 0!==r.validation_message_cache[e]&&t(this)[0].willValidate&&t(this)[0].setCustomValidity(r.validation_message_cache[e]),void 0===t(this).attr("data-hidden-bypass")&&t(this).removeAttr("data-hidden")}),t('[id^="'+this.form_id_prefix+'field-wrapper-"][style="display:none;"] [name]:not([type="hidden"]), [id^="'+this.form_id_prefix+'field-wrapper-"][style="display: none;"] [name]:not([type="hidden"])',i).each(function(){var e=t(this).closest("[data-id]").attr("data-id");""!==t(this)[0].validationMessage&&(r.validation_message_cache[e]=t(this)[0].validationMessage,s.push(t(this))),void 0===t(this).attr("data-hidden-bypass")&&t(this).attr("data-hidden","")}),s.each(function(){t(this)[0].willValidate&&t(this)[0].setCustomValidity("")}),this.form_progress_process(),r.has_ecommerce&&r.form_ecommerce_calculate(),this.form_validate_real_time_process(e)},t.WS_Form.prototype.form_select_all=function(){var e=this;t("[data-select-all]:not([data-init-select-all])",this.form_canvas_obj).each(function(){t(this).attr("data-init-select-all","");var a=t(this).attr("name");t(this).removeAttr("name").removeAttr("value").attr("data-select-all",a),t(this).click(function(){var a=t(this).is(":checked"),i=t(this).attr("data-select-all");t('[name="'+i+'"]:enabled',e.form_canvas_obj).each(function(){t(this).prop("checked",a).trigger("change")})})})},t.WS_Form.prototype.form_select_ajax=function(){var e=this;t("[data-wsf-select2]:not([data-select2-id])",this.form_canvas_obj).each(function(){var a=t(this).closest("[data-id]").attr("data-id"),i=e.field_data_cache[a],r=e.get_object_meta_value(i,"placeholder_row",""),s=ws_form_settings.locale.substring(0,2),o=ws_form_settings.url+"field/"+a+"/select_ajax/",n={templateSelection:function(e){return void 0!==e.data_price&&t(e.element).attr("data-price",e.data_price),e.text},allowClear:!0,placeholder:r,language:s,selectionCssClass:"wsf-select2-selection",dropdownCssClass:"wsf-select2-dropdown"};!("on"==e.get_object_meta_value(i,i.type+"_cascade",""))&&"on"==e.get_object_meta_value(i,"select2_ajax","")&&(n.ajax={url:o,dataType:"json",data:function(t){var a={id:e.form_id,preview:e.form_canvas_obj[0].hasAttribute("data-preview"),value:t.term};return a[ws_form_settings.wsf_nonce_field_name]=ws_form_settings.wsf_nonce,a._wpnonce=ws_form_settings.x_wp_nonce,a},delay:250,cache:!0}),t(this).select2(n)})},t.WS_Form.prototype.form_cascade=function(){var e=this;t("[data-cascade-field-id]:not([data-init-cascade])",this.form_canvas_obj).each(function(){if(void 0===t(this).attr("data-init-cascade")){var a=t(this),i=t(this).closest("[data-type]"),r=t(this).attr("data-cascade-field-id"),s=i.attr("data-repeatable-index");t('[data-cascade-field-id="'+r+'"]',i).attr("data-init-cascade","");var o=!1;if(s)(o=t('[id^="'+e.form_id_prefix+"field-wrapper-"+r+'"][data-id="'+r+'"][data-repeatable-index="'+s+'"]',e.form_canvas_obj)).length||(o=!1);if(!o)o=t('[id^="'+e.form_id_prefix+"field-wrapper-"+r+'"][data-id="'+r+'"]',e.form_canvas_obj);if(o.length){switch(o.attr("data-type")){case"text":case"number":case"rating":case"range":case"price_range":var n="change input";break;default:n="change"}o.on(n,function(){e.form_cascade_process(o,i,a)}),e.form_cascade_process(o,i,a)}}})},t.WS_Form.prototype.form_cascade_process=function(e,a,i){var r=this,s=a.attr("data-id"),o=this.field_data_cache[s],n=a.attr("data-repeatable-index");n||(n=0);var c=a.attr("data-type"),_=e.attr("data-id"),d=e.attr("data-repeatable-index"),l=void 0!==d?"["+d+"]":"",h=e.attr("data-type"),f=this.field_name_prefix+_+l,p=r.get_object_meta_value(o,c+"_cascade_option_text_no_rows","");""==p&&(p=r.language("cascade_option_text_no_rows"));var m=this.get_object_meta_value(o,c+"_cascade_no_match",!1);switch(h){case"select":case"price_select":var v=t('[name="'+f+'[]"]',this.form_canvas_obj).val();break;case"checkbox":case"price_checkbox":case"radio":case"price_radio":v=[];t('[name="'+f+'[]"]:checked',this.form_canvas_obj).each(function(){v.push(t(this).val())});break;default:v=t('[name="'+f+'"]',this.form_canvas_obj).val()}switch(null===v||""===v||void 0===v||"object"==typeof v&&0===v.length?v=!1:"object"!=typeof v&&(v=[v]),c){case"select":case"price_select":var u=t("select",a);if(void 0!==i.attr("data-select2-id"))var g=i.attr("data-select2-id"),b=t("#select2-"+g+"-container");else b=!1;if(void 0!==i.attr("data-cascade-ajax")){if(this.form_post_locked||"object"!=typeof this.api_call_handle[s]||this.api_call_handle[s].abort(),!1===v&&!m)return void u.html('<option value="">'+p+"</option>").val("");var y=r.get_object_meta_value(o,"placeholder_row",""),w=this.get_object_meta_value(o,c+"_cascade_ajax_option_text_loading","");""==w&&(w=this.language("cascade_option_text_loading")),b&&this.set_select2_placeholder(u,w);var k=""!==u.val();u.html('<option value="">'+w+"</option>").val(""),k&&u.trigger("change");var j=new FormData;j.append("id",this.form_id),j.append("value",JSON.stringify(v)),j.append("preview",this.form_canvas_obj[0].hasAttribute("data-preview")),this.api_call_handle[s]=this.api_call("field/"+s+"/cascade/","GET",j,function(e){if(e.data){var i=r.get_field_html(e.data,a.attr("data-repeatable-index")),s=t("select",t(i)).html();s?(b&&r.set_select2_placeholder(u,y),u.html(s)):(b&&r.set_select2_placeholder(u,p),u.html('<option value="">'+p+"</option>").val("")),t("optgroup",u).each(function(){t("option",t(this)).length||t(this).remove()})}})}else{k=""!==(u=t("select",a)).val();u.val(""),k&&u.trigger("change"),void 0===this.cascade_cache[s]&&(this.cascade_cache[s]=[]),void 0===this.cascade_cache[s][n]&&(this.cascade_cache[s][n]='<select id="wsf-cascade-scratch">'+u.html()+"</select>");var x=t(this.cascade_cache[s][n]),S=!1;if(!1!==v&&t("option",x).each(function(){if(-1!==v.indexOf(t(this).attr("data-cascade-value")))return S=!0,!1}),!S)return void((m=this.get_object_meta_value(o,c+"_cascade_no_match",!1))?u.html(x.html()):u.html('<option value="">'+p+"</option>").val(""));t("option",x).each(function(){var e=t(this).attr("data-cascade-value");void 0!==e&&-1===v.indexOf(e)&&t(this).remove()}),t("optgroup",x).each(function(){t("option",t(this)).length||t(this).remove()}),u.html(x.html())}break;case"checkbox":case"price_checkbox":case"radio":case"price_radio":t("[data-cascade-value] input:checked",a).each(function(){t(this).prop("checked",!1).trigger("change")});S=!1;if(!1!==v&&t("[data-cascade-value]",a).each(function(){if(-1!==v.indexOf(t(this).attr("data-cascade-value")))return S=!0,!1}),(m=this.get_object_meta_value(o,c+"_cascade_no_match",!1))&&!S)return t("[data-cascade-value]",a).show().attr("data-cascade-on",""),void t("fieldset",a).show();S?t("[data-cascade-value]",a).each(function(){-1!==v.indexOf(t(this).attr("data-cascade-value"))?t(this).show().attr("data-cascade-on",""):t(this).hide().removeAttr("data-cascade-on")}):t("[data-cascade-value]",a).hide().removeAttr("data-cascade-on"),t("fieldset",a).show().each(function(){t("[data-cascade-value][data-cascade-on]",t(this)).length||t(this).hide()})}},t.WS_Form.prototype.set_select2_placeholder=function(t,e){var a=t.data("select2");a&&a.selection&&a.selection.placeholder&&a.selection.placeholder.text&&(a.selection.placeholder.text=e)},t.WS_Form.prototype.form_date=function(){if(!t('[data-type="datetime"] input',this.form_canvas_obj).length)return!1;if("off"==t.WS_Form.settings_plugin.ui_datepicker)return!1;if("function"!=typeof jQuery().datetimepicker||"object"!=typeof jQuery.datetimepicker||"function"!=typeof jQuery.datetimepicker.setLocale||"function"!=typeof jQuery.datetimepicker.setDateFormatter||"on"!=t.WS_Form.settings_plugin.ui_datepicker&&("native"!=t.WS_Form.settings_plugin.ui_datepicker||this.native_date)){if(this.native_date){var e=this;t('[data-type="datetime"] input',this.form_canvas_obj).each(function(){var a=t(this).attr("value");if(""==a)return!1;var i=t(this).attr("data-date-type");try{switch(i){case"datetime-local":var r=new Date(a),s=new Date(r.valueOf()-6e4*r.getTimezoneOffset()).toISOString();a=s.substring(0,s.length-1)}}catch(t){e.error("error_datetime_default_value",t)}t(this).val(a)})}}else this.form_date_process();this.form_date_validity()},t.WS_Form.prototype.form_date_process=function(){var e=this,a=ws_form_settings.locale.substring(0,2);jQuery.datetimepicker.setLocale(a),t('[data-type="datetime"] input',this.form_canvas_obj).each(function(){if(t(this).is("[readonly]"))t(this).datetimepicker("destroy");else{var a={allowBlank:!0,validateOnBlur:!1,dayOfWeekStart:1,scrollInput:!1,formatDate:"Y-m-d",formatTime:"h:i"};void 0!==t(this).attr("data-inline")&&(a.inline=!0);var i=t(this).attr("data-date-type"),r=t(this).attr("data-date-format")?t(this).attr("data-date-format"):ws_form_settings.date_format,s=t(this).attr("data-time-format")?t(this).attr("data-time-format"):ws_form_settings.time_format,o=t(this).attr("min");if(o)if("+"!=o.charAt(0)&&"-"!=o.charAt(0)){var n=parseInt(ws_form_settings.gmt_offset,10),c=new Date(o);c.setHours(c.getHours()+-1*n),a.minDate=e.date_format(c,"Y-m-d")}else a.minDate=o;var _=t(this).attr("max");if(_)if("+"!=_.charAt(0)&&"-"!=_.charAt(0)){n=parseInt(ws_form_settings.gmt_offset,10);var d=new Date(_);d.setHours(d.getHours()+-1*n),a.maxDate=e.date_format(d,"Y-m-d")}else a.maxDate=_;var l=t(this).attr("data-year-start");l&&(a.yearStart=l);var h=t(this).attr("data-year-end");switch(h&&(a.yearEnd=h),i){case"date":a.format=r,a.timepicker=!1,a.closeOnDateSelect=!0;break;case"time":a.format=s,a.datepicker=!1,a.step=15,a.closeOnDateSelect=!0;break;case"month":a.format="F Y",a.timepicker=!1,a.closeOnDateSelect=!0;break;case"week":a.format="\\W\\e\\e\\k W, Y",a.timepicker=!1,a.weeks=!0,a.closeOnDateSelect=!0;break;default:a.format=r+" "+s,a.step=15}t(this).datetimepicker(a)}})},t.WS_Form.prototype.form_date_validity=function(){if(void 0!==jQuery().datetimepicker){var e=this;t('input[type="text"][data-date-type]:not([data-hidden],[data-hidden-section]), input[type="text"][data-date-type]:not([data-hidden],[data-hidden-section])',this.form_canvas_obj).each(function(){e.field_date_validity_process(t(this)),t(this).change(function(){e.field_date_validity_process(t(this))})})}},t.WS_Form.prototype.field_date_validity_process=function(e){var a=e.closest("[data-id]"),i=a.attr("data-id"),r=a.attr("data-repeatable-index"),s=void 0!==r?"-repeat-"+r:"",o=t("#"+this.form_id_prefix+"invalid-feedback-"+i+s,this.form_canvas_obj);this.set_invalid_feedback(e,o,"",i);var n=e.val();if(""!==n){var c=e.attr("data-date-type");if("week"!==c&&"month"!==c){var _=e.attr("data-date-format")?e.attr("data-date-format"):ws_form_settings.date_format,d=this.get_date(n,c,_);if(isNaN(d.getTime()))this.set_invalid_feedback(e,o,o.html(),i);else{var l=e.attr("min"),h=e.attr("max");if(l||h){if(l){if("time"===c){l="01/01/1970 "+l;var f=0}else f=parseInt(ws_form_settings.gmt_offset,10);var p=new Date(l);p.setHours(p.getHours()+-1*f)}if(h){if("time"===c){h="01/01/1970 "+h;f=0}else f=parseInt(ws_form_settings.gmt_offset,10);var m=new Date(h);m.setHours(m.getHours()+-1*f)}(l&&d<p||h&&d>m)&&this.set_invalid_feedback(e,o,o.html(),i)}}}}},t.WS_Form.prototype.form_color=function(){return!!t('[data-type="color"] input',this.form_canvas_obj).length&&("off"!=t.WS_Form.settings_plugin.ui_color&&void(("on"==t.WS_Form.settings_plugin.ui_color||"native"==t.WS_Form.settings_plugin.ui_color&&!this.native_color)&&this.form_color_process()))},t.WS_Form.prototype.form_color_process=function(){var e=this;void 0!==jQuery().minicolors&&t('[data-type="color"] input',this.form_canvas_obj).each(function(){if("on"==t.WS_Form.settings_plugin.ui_color||"native"==t.WS_Form.settings_plugin.ui_color&&!e.native_color){var a=void 0!==e.framework.minicolors_args?e.framework.minicolors_args:{};t(this).minicolors(a)}})},t.WS_Form.prototype.form_inputmask=function(){t("[data-inputmask]",this.form_canvas_obj).each(function(){void 0!==t(this).inputmask&&t(this).inputmask({clearMaskOnLostFocus:!1})})},t.WS_Form.prototype.form_checkbox_min_max=function(){var e=this;t("[data-checkbox-min]:not([data-checkbox-min-max-init]),[data-checkbox-max]:not([data-checkbox-min-max-init])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-checkbox-min"),i=t(this).attr("data-checkbox-max");if(void 0!==a||void 0!==i){var r=t(this).attr("data-id"),s=t(this).attr("data-repeatable-index"),o=void 0!==s?"-repeat-"+s:"",n=t("#"+e.form_id_prefix+"invalid-feedback-"+r+o,e.form_canvas_obj),c=t('<input type="number" id="'+e.form_id_prefix+"checkbox-min-max-"+r+o+'" data-checkbox-min-max data-progress-include="change" style="display:none !important;" />',e.form_canvas_obj);void 0!==a&&c.attr("min",a),void 0!==i&&c.attr("max",i),i=parseInt(i,10);var _=t('input[type="checkbox"]:not([data-select-all]):checked',t(this)).length;c.attr("value",_),n.before(c),t('input[type="checkbox"]:not([data-select-all])',t(this)).on("change",function(a){var r=t(this).closest("[data-type]"),s=r.attr("data-id"),o=r.attr("data-repeatable-index"),n=void 0!==o?"-repeat-"+o:"",c=t("#"+e.form_id_prefix+"checkbox-min-max-"+s+n,e.form_canvas_obj),_=t('input[type="checkbox"]:not([data-select-all]):checked',r).length;i>0&&_>i&&(t(this).prop("checked",!1),_--),c.val(_).trigger("change")}),t(this).attr("data-checkbox-min-max-init","")}})},t.WS_Form.prototype.form_select_min_max=function(){var e=this;t("[data-select-min]:not([data-select-min-max-init]),[data-select-max]:not([data-select-min-max-init])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-select-min"),i=t(this).attr("data-select-max");if(void 0!==a||void 0!==i){var r=t(this).attr("data-id"),s=t(this).attr("data-repeatable-index"),o=void 0!==s?"-repeat-"+s:"",n=t("#"+e.form_id_prefix+"invalid-feedback-"+r+o,e.form_canvas_obj),c=t('<input type="number" id="'+e.form_id_prefix+"select-min-max-"+r+o+'" data-select-min-max data-progress-include="change" style="display:none !important;" />',e.form_canvas_obj);void 0!==a&&c.attr("min",a),void 0!==i&&c.attr("max",i),i=parseInt(i,10);var _=t("select option:selected",t(this)).length;c.attr("value",_),n.before(c),t("select option",t(this)).on("click",function(){var a=t(this).closest("[data-type]"),r=a.attr("data-id"),s=a.attr("data-repeatable-index"),o=void 0!==s?"-repeat-"+s:"",n=t("#"+e.form_id_prefix+"select-min-max-"+r+o,e.form_canvas_obj),c=t("select option:selected",a).length;i>0&&c>i&&(t(this).prop("selected",!1),c--),n.val(c).trigger("change")}),t(this).attr("data-select-min-max-init","")}})},t.WS_Form.prototype.form_validation=function(){var e=this;!0===this.form_post_run&&this.form_obj.off(),this.get_object_meta_value(this.form,"submit_on_enter",!1)||this.form_obj.on("keydown",":input:not(textarea)",function(t){if(13==t.keyCode)return t.preventDefault(),!1}),this.form_obj.on("submit",function(a){e.trigger("submit-before"),a.preventDefault(),a.stopPropagation(),e.form_post_locked||(e.has_ecommerce&&e.form_ecommerce_calculate(),t(this).addClass(e.class_validated),e.form_validate(t(this))?(e.trigger("submit-validate-success"),e.recaptchas_v2_invisible.length>0?e.recaptcha_v2_invisible_execute():e.form_post("submit")):e.trigger("submit-validate-fail"))})},t.WS_Form.prototype.form_validate=function(e){if(void 0===e)e=this.form_obj;this.trigger("validate-before");this.form.groups.length;var a=!1,i=!1,r=e[0].checkValidity();if(!r){var s=t(":invalid",e).not("fieldset");s&&(i=s.first(),a=this.get_group_index(i))}var o=this.get_field_value_fallback("signature",!1,"class_invalid_label",[]),n=this.get_field_value_fallback("signature",!1,"class_invalid_field",[]),c=this.get_field_value_fallback("signature",!1,"class_invalid_invalid_feedback",[]),_=this.get_field_value_fallback("signature",!1,"class_valid_label",[]),d=this.get_field_value_fallback("signature",!1,"class_valid_field",[]),l=this.get_field_value_fallback("signature",!1,"class_valid_invalid_feedback",[]);if(this.signatures.length>0)for(var h in this.signatures)if(this.signatures.hasOwnProperty(h)){var f=this.signatures[h],p=f.name,m=t('[name="'+p+'"]',e),v=m.closest("[data-id]"),u=t("label",v),g=v.attr("data-id"),b=v.attr("data-repeatable-index"),y=void 0!==b?"-repeat-"+b:"",w=t("#"+this.form_id_prefix+"invalid-feedback-"+g+y,e),k=f.required&&null==m.attr("data-required-bypass-section")&&null==m.attr("data-required-bypass");f.signature.isEmpty()?(k&&(u.addClass(o.join(" ")),u.removeClass(_.join(" ")),m.addClass(n.join(" ")),m.removeClass(d.join(" ")),w.addClass(c.join(" ")),w.removeClass(l.join(" ")),!1===a&&(a=this.get_group_index(v)),!1===i&&(i=m),r=!1),m.on("mousedown touchstart",function(){var a=t(this),i=a.closest("[data-id]"),r=t("label",i),s=i.attr("data-id"),h=i.attr("data-repeatable-index"),f=void 0!==h?"-repeat-"+h:"",p=t("#"+this.form_id_prefix+"invalid-feedback-"+s+f,e);r.addClass(_.join(" ")),r.removeClass(o.join(" ")),a.addClass(d.join(" ")),a.removeClass(n.join(" ")),p.addClass(l.join(" ")),p.removeClass(c.join(" "))})):(u.addClass(_.join(" ")),u.removeClass(o.join(" ")),m.addClass(d.join(" ")),m.removeClass(n.join(" ")),w.addClass(l.join(" ")),w.removeClass(c.join(" ")))}var j=this.get_field_value_fallback("recaptcha",!1,"class_invalid_label",[]),x=this.get_field_value_fallback("recaptcha",!1,"class_invalid_field",[]),S=this.get_field_value_fallback("recaptcha",!1,"class_invalid_invalid_feedback",[]),F=this.get_field_value_fallback("recaptcha",!1,"class_valid_label",[]),W=this.get_field_value_fallback("recaptcha",!1,"class_valid_field",[]),C=this.get_field_value_fallback("recaptcha",!1,"class_valid_invalid_feedback",[]);if(this.recaptchas_v2_default.length>0)for(var L in this.recaptchas_v2_default)if(this.recaptchas_v2_default.hasOwnProperty(L)){var O=this.recaptchas_v2_default[L],q=O.id,M=O.name,z=t('[name="'+M+'"]',e),I=z.closest("[data-id]"),H=t("label",I),P=t("#"+this.form_id_prefix+"invalid-feedback-"+q,e);""==grecaptcha.getResponse(q)?(H.addClass(j.join(" ")),H.removeClass(F.join(" ")),z.addClass(x.join(" ")),z.removeClass(W.join(" ")),P.addClass(S.join(" ")),P.removeClass(C.join(" ")),!1===a&&(a=this.get_group_index(I)),!1===i&&(i=z),r=!1):(H.addClass(F.join(" ")),H.removeClass(j.join(" ")),z.addClass(W.join(" ")),z.removeClass(x.join(" ")),P.addClass(C.join(" ")),P.removeClass(S.join(" ")))}return r||(!1!==i&&this.get_object_meta_value(this.form,"invalid_field_focus",!0)&&(!1!==a?this.object_focus=i:i.focus()),!1!==a&&this.group_index_set(a)),this.trigger("validate-after"),r},t.WS_Form.prototype.form_validate_real_time=function(e){var a=this;for(var i in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(i)){var r=this.field_data_cache[i].type,s=t.WS_Form.field_type_cache[r];if(void 0!==s.events){var o=s.events.event,n=this.field_data_cache[i].id,c=void 0!==s.submit_array&&s.submit_array;t('[data-type][data-id="'+n+'"],input[type="hidden"][data-id-hidden="'+n+'"]',this.form_canvas_obj).each(function(){var e=t(this).attr("data-repeatable-index"),i=void 0!==e?"["+e+"]":"";if(c)var r=t('[name="'+ws_form_settings.field_prefix+n+i+'[]"]:not([data-init-validate-real-time]), [name="'+ws_form_settings.field_prefix+n+i+'[]"]:not([data-init-validate-real-time])',a.form_canvas_obj);else r=t('[name="'+ws_form_settings.field_prefix+n+i+'"]:not([data-init-validate-real-time]), [name="'+ws_form_settings.field_prefix+n+i+'"]:not([data-init-validate-real-time])',a.form_canvas_obj);r.length&&(r.attr("data-init-validate-real-time",""),r.on(o+" blur",function(t){if(a.form_validate_real_time_process(!1),"blur"!==t.type){var e=r.attr("id");e&&a.form_calc(e)}}))})}}this.form_validate_real_time_process(!1)},t.WS_Form.prototype.form_validate_real_time_process=function(t){for(var e in this.form_valid=this.form_validate_silent(this.form_obj),t||this.form_canvas_obj.trigger("wsf-validate-silent"),null!==this.form_valid_old&&this.form_valid_old==this.form_valid||t||this.form_canvas_obj.trigger("wsf-validate"),this.form_valid_old=this.form_valid,this.form_validation_real_time_hooks)if(this.form_validation_real_time_hooks.hasOwnProperty(e)){var a=this.form_validation_real_time_hooks[e];void 0===a?delete this.form_validation_real_time_hooks[e]:a(this.form_valid,this.form,this.form_id,this.form_instance_id,this.form_obj,this.form_canvas_obj)}return this.form_valid},t.WS_Form.prototype.form_validate_real_time_register_hook=function(t){this.form_validation_real_time_hooks.push(t)},t.WS_Form.prototype.form_validate_silent=function(e){if(!e[0].checkValidity())return!1;if(this.signatures.length>0)for(var a in this.signatures)if(this.signatures.hasOwnProperty(a)){var i=this.signatures[a];if(void 0===i.canvas.attr("data-required-bypass-section")&&void 0===i.canvas.attr("data-required-bypass")){if(!1===i.signature)return!1;if(i.signature.isEmpty()&&i.required)return!1}}if(this.recaptchas_v2_default.length>0)for(var r in this.recaptchas_v2_default)if(this.recaptchas_v2_default.hasOwnProperty(r)){var s=this.recaptchas_v2_default[r];if(!1===s.id)return!1;var o=s.recaptcha_id;if(void 0===t("#"+o,this.form_canvas_obj).attr("data-required-bypass-section")&&void 0===t("#"+o,this.form_canvas_obj).attr("data-required-bypass")&&""==grecaptcha.getResponse(s.id))return!1}return!0},t.WS_Form.prototype.object_validate=function(e){var a=[];if(void 0===e)return!1;var i=this,r=!0;return t("[data-required]:not([data-required-bypass-section],[data-required-bypass])",e).each(function(){var e=t(this).closest("[data-id]").attr("data-id"),s=i.field_data_cache[e].type,o=t(this).closest("[data-type]").attr("data-repeatable-index"),n=void 0!==o?"["+o+"]":"",c=ws_form_settings.field_prefix+e+n,_=!1;switch(s){case"radio":case"price_radio":if(void 0!==a[c])return;_=t(this)[0].checkValidity();break;case"signature":_=i.signature_get_response_by_name(c);break;case"email":_=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t(this).val());break;default:_=t(this)[0].checkValidity()}a[c]=!0,_||(r=!1)}),r},t.WS_Form.prototype.form_conditional=function(e){var a=this;if(void 0===e)e=!1;if(!1===this.conditional_cache){if(void 0===(h=this.get_object_meta_value(this.form,"conditional",!1)).groups)return!1;if(void 0===h.groups[0])return!1;if(void 0===h.groups[0].rows)return!1;for(var i in h.groups[0].rows)if(h.groups[0].rows.hasOwnProperty(i)){var r=h.groups[0].rows[i];if((void 0===r.disabled||!r.disabled)&&void 0!==r.data&&void 0!==r.data[1]){var s=r.data[1];try{s=JSON.parse(s)}catch(t){s=!1}!1!==s&&(s.last_state=[],this.conditional_events(s,e),!1===this.conditional_cache&&(this.conditional_cache=[]),this.conditional_cache.push(s))}}}else for(var i in this.conditional_cache){if(this.conditional_cache.hasOwnProperty(i))(s=this.conditional_cache[i]).last_state=[],this.conditional_events(s,e)}for(var o in this.conditional_event_selector_to_condition)if(this.conditional_event_selector_to_condition.hasOwnProperty(o)){var n=this.conditional_event_selector_to_condition[o];for(var c in n)if(n.hasOwnProperty(c)){var _=n[c],d=_.object_event_selector,l=_.object_event_obj,h=_.conditionals;if(e){"null"===o&&(o=null);l.each(function(){t(this).on(c,o,{conditionals:h},function(e,i,r,s){if(void 0===r||void 0===s||a.form_id===r||a.form_instance_id===s){var o=t(this).closest("[data-type]"),n=o.attr("data-repeatable-index")?o.attr("data-repeatable-index"):0;for(var c in e.data.conditionals)if(e.data.conditionals.hasOwnProperty(c)){var _=e.data.conditionals[c];a.conditional_process(_,!1,t(this),n,e)}}})}),t.WS_Form.debug_rendered&&this.log("log_conditional_event",(null===o?this.language("debug_form"):o)+" ("+c+")","conditional")}t(d,this.form_canvas_obj).each(function(){if(void 0===t(this).attr("data-fired-conditional")){var e=t(this).closest("[data-type]"),i=e.attr("data-repeatable-index")?e.attr("data-repeatable-index"):0;for(var r in h)if(h.hasOwnProperty(r)){var s=h[r];a.conditional_process(s,!0,t(this),i,!1)}var o=t(this).attr("name");t('[name="'+o+'"]',this.form_canvas_obj).attr("data-fired-conditional","")}}),t("[data-fired-conditional]",this.form_canvas_obj).removeAttr("data-fired-conditional")}}},t.WS_Form.prototype.conditional_events=function(e,a){if(void 0===i)var i=!1;if(void 0===a)a=!0;var r=this;for(var s in e.if)if(e.if.hasOwnProperty(s)){var o=e.if[s];if(void 0!==o.conditions)for(var n in o.conditions)if(o.conditions.hasOwnProperty(n)){var c=o.conditions[n];if(this.conditional_condition_check(c)){var _=c.object,d=c.object_id,l=!!c.object_row_id&&parseInt(c.object_row_id,10),h=c.logic,f=c.value,p=[];switch(_){case"form":p.push(this.conditional_event_get(_,this.form_id,0,this.form,h));break;case"group":if(void 0===this.group_data_cache[d])break;var m=this.group_data_cache[d];p.push(this.conditional_event_get(_,d,l,m,h));break;case"section":if(void 0===this.section_data_cache[d])break;m=this.section_data_cache[d];p.push(this.conditional_event_get(_,d,l,m,h));break;case"field":if(void 0===this.field_data_cache[d])break;m=this.field_data_cache[d];var v=t.WS_Form.field_type_cache[m.type],u=void 0!==m.section_repeatable_section_id;p.push(this.conditional_event_get(_,d,l,m,h,u));var g=[];switch(h){case"field_match":case"field_match_not":var b=f;if(0==parseInt(b,10))break;if(void 0===this.field_data_cache[b])break;var y=this.field_data_cache[b];u=void 0!==y.section_repeatable_section_id;p.push(this.conditional_event_get("field",b,!1,y,h,u)),g.field_match_id=this.form_id_prefix+"field-"+b}var w=this.get_field_value_fallback(v,!1,"attribute_"+h,!1);if("object"==typeof w){var k="#"+this.form_id_prefix+_+"-"+d;for(var j in w)if(w.hasOwnProperty(j)){var x=w[j];x=this.mask_parse(x,g),t(k,this.form_canvas_obj).attr(j,x)}}}for(var S in p)if(p.hasOwnProperty(S)){var F=p[S],W=(k=null,F.repeatable);if("wsf-validate"==F.event||"wsf-validate-silent"==F.event||"wsf-section-repeatable"==F.event){if(!a)continue;"wsf-section-repeatable"==F.event&&(F.event="wsf-section-repeatable-"+d);var C=this.form_canvas_obj;k=null}else if("wsf-rendered"==F.event||"wsf-submit"==F.event||"wsf-save"==F.event||"wsf-submit wsf-save"==F.event||"wsf-complete"==F.event||"wsf-error"==F.event)C=t(document),k=null;else{C=this.form_canvas_obj;switch(F.object){case"form":k=null;break;case"group":k='[href="#'+this.form_id_prefix+"tab-content-"+d+'"]';break;case"section":k='[id^="'+this.form_id_prefix+F.object+"-"+F.object_id+'"][data-id="'+F.object_id+'"]';break;case"field":switch(this.field_data_cache[d].type){case"radio":case"price_radio":case"checkbox":case"price_checkbox":k='[name^="'+ws_form_settings.field_prefix+d+'["]';break;case"select":case"price_select":if(W)k='[id^="'+this.form_id_prefix+F.object+"-"+F.object_id+'-repeat-"]';else k="#"+this.form_id_prefix+F.object+"-"+F.object_id;break;default:if(W)k='[id^="'+this.form_id_prefix+F.object+"-"+F.object_id+(!1!==F.object_row_id?"-row-"+F.object_row_id:"")+'-repeat-"]';else k="#"+this.form_id_prefix+F.object+"-"+F.object_id+(!1!==F.object_row_id?"-row-"+F.object_row_id:"")}}}if(F.create&&!1!==F.event&&!1!==k&&0==t(k+"[data-init-conditional]",this.form_canvas_obj).length)switch(F.event){case"recaptcha":this.recaptchas_conditions.push(function(){r.conditional_process(e,!1,!1,0,!1)});break;default:if(null===k&&(k="null"),void 0===this.conditional_event_selector_to_condition[k]&&(this.conditional_event_selector_to_condition[k]=[]),void 0===this.conditional_event_selector_to_condition[k][F.event]&&(this.conditional_event_selector_to_condition[k][F.event]={object_event_selector:k,object_event_obj:C,conditionals:[],event_processed:!1}),-1===this.conditional_event_selector_to_condition[k][F.event].conditionals.indexOf(e)&&this.conditional_event_selector_to_condition[k][F.event].conditionals.push(e),ws_form_settings.debug){var L=t(k,this.form_canvas_obj).attr("data-populate-event"),O=L?L.split(" "):[];O.push(F.event),L=(O=O.filter(function(t,e,a){return a.indexOf(t)===e})).join(" "),t(k,this.form_canvas_obj).attr("data-populate-event",L)}}}}}}},t.WS_Form.prototype.conditional_event_get=function(e,a,i,r,s,o){if(void 0===o)o=!1;var n={object:e,object_id:a,object_row_id:i,create:!0,event:!1,row:!1,repeatable:o};switch(e){case"field":var c=t.WS_Form.field_type_cache[r.type];void 0!==c.conditional&&(void 0!==c.conditional.exclude_condition&&(n.create=!c.conditional.exclude_condition),void 0!==c.conditional.condition_event&&(n.event=c.conditional.condition_event),void 0!==c.conditional["object_event.row"]&&c.conditional["object_event.row"]&&!1!==i&&(n.row=!0))}var _=t.WS_Form.settings_form.conditional.objects[e].logic;return void 0!==_[s]&&void 0!==_[s].event&&(n.event=_[s].event),n},t.WS_Form.prototype.conditional_process=function(e,a,i,r,s){if(void 0===e.if)return!1;if(void 0===e.then)return!1;if(void 0===e.else)return!1;var o=!1;for(var n in e.if)if(e.if.hasOwnProperty(n)){var c=e.if[n];if(void 0!==c.conditions){var _=!1,d="";for(var l in c.conditions)if(c.conditions.hasOwnProperty(l)){var h=c.conditions[l];if(this.conditional_condition_check(h)){var f=h.object,p=h.object_id,m=void 0!==h.object_row_id&&parseInt(h.object_row_id,10),v=h.logic,u=h.value,g=void 0===h.case_sensitive||h.case_sensitive,b=l>0?void 0===h.logic_previous?"||":h.logic_previous:"||",y=ws_form_settings.field_prefix+p;if(t.WS_Form.debug_rendered){switch(f){case"form":var w=this.form_obj;break;case"group":w=this.group_data_cache[p];break;case"section":w=this.section_data_cache[p];break;case"field":w=this.field_data_cache[p]}var k=t.WS_Form.settings_form.conditional,j=k.logic_previous,x=k.objects[f].logic;if(void 0!==x[v])var S=x[v].text.toUpperCase();else S="";if(void 0!==j[b])var F=j[b].text.toUpperCase();else F="";d="<strong>"+(l>0?F+" ":"")+"IF ["+this.html_encode(w.label)+"] "+S+(""!=u?" '"+u+"'":"")+"</strong> ("+(void 0!==w.type?"Type: "+w.type+" | ":"")+"ID: "+p+(m?" | Row ID: "+m:"")+") "}switch(f){case"form":var W="#"+this.form_obj_id;break;case"group":W="#"+this.form_id_prefix+"tab-content-"+p;break;case"section":W="#"+this.form_id_prefix+f+"-"+p;break;case"field":var C=r>0?"-repeat-"+r:"",L="#"+this.form_id_prefix+f+"-"+p+"-row-"+m+C,O=(W="#"+this.form_id_prefix+f+"-"+p+C,t('[data-type][data-id="'+p+'"]'+(r>0?'[data-repeatable-index="'+r+'"]':""),this.form_canvas_obj))}var q=t(W,this.form_canvas_obj).val();!g&&q&&(q=q.toLowerCase(),u=u.toLowerCase());if(["r==","r!=","r>","r<","r>=","r<="].includes(v)){var M=t('[data-repeatable][data-id="'+p+'"]',this.form_canvas_obj);if(!M.length)continue;q=M.length}u=this.parse_variables_process(u).output;switch(v){case"d>":case"d<":case"d==":case"d!=":var z=void 0!==this.field_data_cache[p]&&this.field_data_cache[p];if(!1!==z){var I=this.get_object_meta_value(z,"input_type_datetime","date"),H=this.get_object_meta_value(z,"format_date",ws_form_settings.date_format);u=this.get_date(u,I,H),q=this.get_date(q,I,H)}}var P=!1;switch(v){case"==":P=this.get_number(q)==this.get_number(u);break;case"!=":P=this.get_number(q)!=this.get_number(u);break;case">":""!=q&&(P=this.get_number(q)>this.get_number(u));break;case"<":""!=q&&(P=this.get_number(q)<this.get_number(u));break;case">=":""!=q&&(P=this.get_number(q)>=this.get_number(u));break;case"<=":""!=q&&(P=this.get_number(q)<=this.get_number(u));break;case"d>":""!=q&&""!=u&&(P=Date.parse(q)>Date.parse(u));break;case"d<":""!=q&&""!=u&&(P=Date.parse(q)<Date.parse(u));break;case"d==":""!=q&&""!=u&&(P=Date.parse(q)==Date.parse(u));break;case"d!=":""!=q&&""!=u&&(P=Date.parse(q)!=Date.parse(u));break;case"rc==":case"rc!=":P=(q=t('input[type="checkbox"]:not([data-select-all]):checked',O).length)==this.get_number(u),"rc!="==v&&(P=!P);break;case"rc>":P=(q=t('input[type="checkbox"]:not([data-select-all]):checked',O).length)>this.get_number(u);break;case"rc<":P=(q=t('input[type="checkbox"]:not([data-select-all]):checked',O).length)<this.get_number(u);break;case"rs==":case"rs!=":P=(q=t("option:not([data-placeholder]):selected",O).length)==this.get_number(u),"rc!="==v&&(P=!P);break;case"rs>":P=(q=t("option:not([data-placeholder]):selected",O).length)>this.get_number(u);break;case"rs<":P=(q=t("option:not([data-placeholder]):selected",O).length)<this.get_number(u);break;case"r==":P=this.get_number(q)==this.get_number(u);break;case"r!=":P=this.get_number(q)!=this.get_number(u);break;case"r>":""!=q&&(P=this.get_number(q)>this.get_number(u));break;case"r<":""!=q&&(P=this.get_number(q)<this.get_number(u));break;case"r>=":""!=q&&(P=this.get_number(q)>=this.get_number(u));break;case"r<=":""!=q&&(P=this.get_number(q)<=this.get_number(u));break;case"section_repeatable":e.last_state[r]="",P=s.type=="wsf-section-repeatable-"+p;break;case"equals":case"c==":P=q==u;break;case"equals_not":case"c!=":P=q!=u;break;case"contains":case"contains_not":P=-1!=q.indexOf(u),"contains_not"==v&&(P=!P);break;case"starts":case"starts_not":P=q.startsWith(u),"starts_not"==v&&(P=!P);break;case"ends":case"ends_not":P=q.endsWith(u),"ends_not"==v&&(P=!P);break;case"blank":case"blank_not":P=""==q,"blank_not"==v&&(P=!P);break;case"checked":case"checked_not":P=t(L,this.form_canvas_obj).is(":checked"),"checked_not"==v&&(P=!P);break;case"checked_any":case"checked_any_not":P=t("input:checked",O).length>0,"checked_any_not"==v&&(P=!P);break;case"checked_value_equals":case"checked_value_equals_not":P=t('input[value="'+u+'"]',O).prop("checked");"checked_value_equals_not"==v&&(P=!P);break;case"selected":case"selected_not":P=t('option[data-id="'+m+'"]',t(W,this.form_canvas_obj)).prop("selected");"selected_not"==v&&(P=!P);break;case"selected_any":case"selected_any_not":P=t("option:not([data-placeholder]):selected",t(W,this.form_canvas_obj)).length>0;"selected_any_not"==v&&(P=!P);break;case"selected_value_equals":case"selected_value_equals_not":P=t('option[value="'+u+'"]',t(W,this.form_canvas_obj)).prop("selected");"selected_value_equals_not"==v&&(P=!P);break;case"regex_email":case"regex_email_not":P=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(q),"regex_email_not"==v&&(P=!P);break;case"regex_url":case"regex_url_not":P=/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi.test(q),"regex_url_not"==v&&(P=!P);break;case"regex":case"regex_not":P=new RegExp(u).test(q),"regex_not"==v&&(P=!P);break;case"wsf-rendered":case"wsf-submit":case"wsf-save":case"wsf-submit_save":case"wsf-complete":case"wsf-error":case"click":case"mousedown":case"mouseup":case"mouseover":case"mouseout":case"touchstart":case"touchmove":case"touchend":case"touchcancel":case"focus":case"blur":case"change":case"change_input":case"input":case"keyup":case"keydown":e.last_state[r]="",P=v==s.type||"change_input"==v&&-1!=["change","input"].indexOf(s.type)||"wsf_submit_save"==v&&-1!=["wsf-submit","wsf-save"].indexOf(s.type);break;case"ch>":P=360*this.hex_to_hsl(q).h>u;break;case"ch<":P=360*this.hex_to_hsl(q).h<u;break;case"cs>":P=100*this.hex_to_hsl(q).s>u;break;case"cs<":P=100*this.hex_to_hsl(q).s<u;break;case"cl>":P=100*this.hex_to_hsl(q).l>u;break;case"cl<":P=100*this.hex_to_hsl(q).l<u;break;case"recaptcha":case"recaptcha_not":P=""!=this.recaptcha_get_response_by_name(y),"recaptcha_not"==v&&(P=!P);break;case"signature":case"signature_not":P=this.signature_get_response_by_name(y),"signature_not"==v&&(P=!P);break;case"file":case"file_not":P=this.file_get_count_by_field_id(p)>0,"file_not"==v&&(P=!P);break;case"f>":P=this.file_get_count_by_field_id(p)>u;break;case"f<":P=this.file_get_count_by_field_id(p)<u;break;case"f==":case"f!=":P=this.file_get_count_by_field_id(p)==u,"f!="==v&&(P=!P);break;case"field_match":case"field_match_not":var D=parseInt(u,10);if(D>0){var A="#"+this.form_id_prefix+"field-"+D;P=t(A,this.form_canvas_obj).val()==q,"field_match_not"==v&&(P=!P)}break;case"cc==":P=q.length==parseInt(u,10);break;case"cc!=":P=q.length!=parseInt(u,10);break;case"cc>":P=q.length>parseInt(u,10);break;case"cc<":P=q.length<parseInt(u,10);break;case"cw==":P=this.get_word_count(q)==parseInt(u,10);break;case"cw!=":P=this.get_word_count(q)!=parseInt(u,10);break;case"cw>":P=this.get_word_count(q)>parseInt(u,10);break;case"cw<":P=this.get_word_count(q)<parseInt(u,10);break;case"validate":case"validate_not":switch(f){case"form":P=this.form_valid;break;case"group":case"section":P=this.object_validate(t(W,this.form_canvas_obj));break;case"field":P=this.object_validate(O)}"validate_not"==v&&(P=!P)}_=this.conditional_logic_previous(_,P,b)}}b=n>0?void 0===c.logic_previous?"||":c.logic_previous:"||";o=this.conditional_logic_previous(o,_,b)}}var V=!1;if(o?!0===e.last_state[r]&&void 0!==e.last_state[r]||(V="then",e.last_state[r]=!0):!1===e.last_state[r]&&void 0!==e.last_state[r]||(V="else",e.last_state[r]=!1),!1!==V){var T=e[V];T.length&&(t.WS_Form.debug_rendered&&this.log("log_conditional_fired_"+V,d,"conditional"),this.conditional_process_actions(T,V,i,r))}!a&&this.has_ecommerce&&this.form_ecommerce_calculate()},t.WS_Form.prototype.hex_to_hsl=function(t){var e=this.hex_to_rgb(t);return!1!==e&&this.rgb_to_hsl(e)},t.WS_Form.prototype.hex_to_rgb=function(t){if(""==t)return!1;var e="#"==t[0];if(e&&7!=t.length)return!1;if(!e&&6!=t.length)return!1;t=e?t.substr(1):t;return{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16)}},t.WS_Form.prototype.rgb_to_hsl=function(t){if(void 0===t.r)return!1;if(void 0===t.g)return!1;if(void 0===t.b)return!1;var e=t.r,a=t.g,i=t.b;e/=255,a/=255,i/=255;var r,s,o=Math.max(e,a,i),n=Math.min(e,a,i),c=(o+n)/2;if(o==n)r=s=0;else{var _=o-n;switch(s=c>.5?_/(2-o-n):_/(o+n),o){case e:r=(a-i)/_+(a<i?6:0);break;case a:r=(i-e)/_+2;break;case i:r=(e-a)/_+4}r/=6}return{h:r,s:s,l:c}},t.WS_Form.prototype.conditional_process_actions=function(e,a,i,r){var s=0,o=!1,n=!1,c=this;for(var _ in e)if(e.hasOwnProperty(_)){var d=e[_];if(this.conditional_action_check(d)){var l=d.object,h=d.object_id,f=void 0!==d.object_row_id&&d.object_row_id,p=d.action;switch(l){case"form":var m=c.form_obj,v=c.form_obj,u=void 0!==d.value&&this.parse_variables_process(d.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,p,m,v,l,h,f,u,!1);o=o||g.process_required,n=n||g.process_bypass;break;case"group":var b="#"+this.form_id_prefix+"group-"+h;m=v=t(b,this.form_canvas_obj),u=void 0!==d.value&&this.parse_variables_process(d.value,!1,!1,!1,!1,!1).output,g=this.conditional_process_action(a,p,m,v,l,h,f,u,!1);o=o||g.process_required,n=n||g.process_bypass;break;case"section":var y=this.get_section_id(i);if(!(k=t('[id^="'+this.form_id_prefix+'section-"][data-id="'+h+'"]',this.form_canvas_obj)).length)break;var w=k.first();y===parseInt(h,10)&&w.attr("data-repeatable-index")&&(k=k.filter('[data-repeatable-index="'+r+'"]')),k.each(function(){var e=void 0!==t(this).attr("data-repeatable-index")&&t(this).attr("data-repeatable-index"),i=void 0!==d.value&&c.parse_variables_process(d.value,e,!1,!1,!1,!1).output,r=c.conditional_process_action(a,p,t(this),t(this),l,h,f,i,e);o=o||r.process_required,n=n||r.process_bypass});break;case"field":var k;y=this.get_section_id(i);if(!(k=t('[id^="'+this.form_id_prefix+'field-wrapper-"][data-id="'+h+'"],input[type="hidden"][data-id-hidden="'+h+'"]',this.form_canvas_obj)).length)break;w=k.first();y===this.get_section_id(w.first())&&w.attr("data-repeatable-index")&&(k=k.filter('[data-repeatable-index="'+r+'"]')),k.each(function(){var e=void 0!==t(this).attr("data-repeatable-index")&&t(this).attr("data-repeatable-index"),i=!1!==e?"-repeat-"+e:"",r="#"+c.form_id_prefix+"field-"+h+(f?"-row-"+f:"")+i,s=t(r,c.form_canvas_obj),_=void 0!==c.field_data_cache[h]&&c.field_data_cache[h],m=void 0!==d.value&&c.parse_variables_process(d.value,e,!1,_,!1,!1).output,v=c.conditional_process_action(a,p,t(this),s,l,h,f,m,e);o=o||v.process_required,n=n||v.process_bypass});break;case"action":u=void 0!==d.value&&c.parse_variables_process(d.value,!1,!1,!1,!1,!1).output,g=c.conditional_process_action(a,p,t(this),!1,l,h,f,u,!1);o=o||g.process_required,n=n||g.process_bypass}s++}}return o&&(this.form_progress(),this.form_required()),n&&this.form_bypass(!0,"form"),s},t.WS_Form.prototype.conditional_process_action=function(e,a,i,r,s,o,n,c,_){if(void 0===c)c="";var d=ws_form_settings.field_prefix+o+(_?"["+_+"]":""),l=c,h=!1,f=!1,p=!1;switch(a){case"value":case"value_number":case"value_datetime":case"value_tel":case"value_email":case"value_textarea":switch(i.attr("data-type")){case"price":case"cart_price":if(""===c&&(c="0"),isNaN(c))c=this.get_number(c);c=this.get_price(c)}r.attr("data-value-old",function(){return t(this).val()}).val(c).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"),"value_textarea"===a&&this.textarea_set_value(r,c);break;case"value_range":case"value_rating":r.attr("data-value-old",function(){return t(this).val()}).val(c).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"value_color":"function"==typeof r.minicolors?r.attr("data-value-old",function(){return t(this).val()}).minicolors("value",{color:c}).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"):r.attr("data-value-old",function(){return t(this).val()}).val(c).filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old");break;case"html":t("[data-html]",i).html(c);break;case"text_editor":t("[data-text-editor]",i).html(c);break;case"button_html":r.html(c);break;case"class_add_wrapper":i.addClass(c),h="debug_action_added";break;case"class_remove_wrapper":i.removeClass(c),h="debug_action_removed";break;case"class_add_field":r.addClass(c),h="debug_action_added";break;case"class_remove_field":r.removeClass(c),h="debug_action_removed";break;case"reset_file":r.attr("data-value-old",function(){return t(this).val()}).val("").filter(function(){return t(this).val()!==t(this).attr("data-value-old")}).trigger("change").removeAttr("data-value-old"),h="debug_action_reset";break;case"reset_signature":this.signature_clear_by_name(d),h="debug_action_reset";break;case"value_row_select":case"value_row_deselect":if(!r.is(":enabled"))break;var m=r.prop("selected")!==("value_row_select"==a);r.prop("selected",!1).prop("selected","value_row_select"==a),m&&r.closest("select").trigger("change"),h="debug_action_"+("value_row_select"==a?"selected":"deselected");break;case"value_row_select_value":case"value_row_deselect_value":m=t('option[value="'+this.html_encode(c)+'"]',r).prop("selected")!==("value_row_select_value"==a);t('option[value="'+this.html_encode(c)+'"]',r).prop("selected","value_row_select_value"==a),m&&r.trigger("change"),h="debug_action_"+("value_row_select"==a?"selected_value":"deselected_value");break;case"value_row_reset":i.find("option:enabled").prop("selected",!0).prop("selected",!1).trigger("change"),h="debug_action_reset";break;case"value_row_check":case"value_row_uncheck":if(!r.is(":enabled"))break;m=r.prop("checked")!==("value_row_check"==a);r.prop("checked","value_row_check"==a),m&&r.trigger("change"),h="debug_action_"+("value_row_check"==a?"checked":"unchecked");break;case"value_row_check_value":case"value_row_uncheck_value":m=t('input[value="'+this.html_encode(c)+'"]',i).prop("checked")!==("value_row_check_value"==a);t('input[value="'+this.html_encode(c)+'"]',i).prop("checked","value_row_check_value"==a),m&&t('input[value="'+this.html_encode(c)+'"]',i).trigger("change"),h="debug_action_"+("value_row_check_value"==a?"checked":"unchecked");break;case"value_row_required":case"value_row_not_required":r.prop("required","value_row_required"==a).removeAttr("data-init-required"),"value_row_required"==a?r.attr("data-required","").attr("aria-required","true"):r.removeAttr("data-required").removeAttr("aria-required"),h="debug_action_"+("value_row_required"==a?"required":"not_required"),f=!0;break;case"value_row_disabled":case"value_row_not_disabled":r.attr("disabled","value_row_disabled"==a),h="debug_action_"+("value_row_disabled"==a?"disabled":"enabled");break;case"value_row_visible":case"value_row_not_visible":"value_row_not_visible"===a?r.parent().hide():r.parent().show(),h="debug_action_"+("value_row_not_visible"==a?"hide":"show");break;case"value_row_focus":r.focus(),h="debug_action_focussed";break;case"value_row_class_add":r.addClass(c),h="debug_action_added";break;case"value_row_class_remove":r.removeClass(c),h="debug_action_removed";break;case"value_row_set_custom_validity":var v=t('[id^="'+this.form_id_prefix+"invalid-feedback-"+o+"-row-"+n+'"]',i);this.set_invalid_feedback(r,v,c,o,n),p=!0;break;case"visibility":switch(s){case"section":case"field":"off"===c?(i.hide(),p=!0,h="debug_action_hide"):(i.show(),p=!0,"section"==s&&this.signatures_redraw(!1,o),"field"==s&&this.signatures_redraw(!1,!1,o),h="debug_action_show")}break;case"set_row_count":if(!(W=t('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj)).length)break;var u=W.length;if(isNaN(c))break;var g=parseInt(c,10),b=this.section_data_cache[o],y=this.get_object_meta_value(b,"section_repeat_min",1);(y=""==y||isNaN(y)?1:parseInt(y,10))<1&&(y=1);var w=this.get_object_meta_value(b,"section_repeat_max",!1);if(g<y&&(g=y),!1!==(w=""!=w&&!isNaN(y)&&parseInt(w,10))&&g>w&&(g=w),u<g){for(var k=W.last(),j=g-u,x=0;x<j;x++)this.section_clone(k);this.section_add_init(o),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+o)}if(u>g){for(var S=u-g,F=0;F<S;F++){var W;(W=t('[data-repeatable][data-id="'+o+'"]',this.form_canvas_obj)).last().remove()}this.section_remove_init(o),this.form_canvas_obj.trigger("wsf-section-repeatable").trigger("wsf-section-repeatable-"+o)}break;case"disabled":switch(s){case"section":i.prop("disabled","on"==c);break;case"field":r.prop("disabled","on"==c);var C=this.get_field_value_fallback(i.attr("data-type"),!1,"class_disabled",!1);"on"==c?(!1!==C&&r.addClass(C.join(" ")),r.css({"pointer-events":"none"})):(!1!==C&&r.removeClass(C.join(" ")),r.attr("style",""))}h="debug_action_"+("on"==c?"disabled":"enabled");break;case"required":switch((q=this.field_data_cache[o]).type){case"radio":case"price_radio":r=t('[name="'+d+'[]"]',i)}r.prop("required","on"==c).removeAttr("data-init-required"),"on"==c?r.attr("data-required","").attr("aria-required","true"):r.removeAttr("data-required").removeAttr("aria-required"),h="debug_action_"+("on"==c?"required":"not_required"),f=!0;break;case"required_signature":r.attr("required","on"==c).removeAttr("data-init-required"),"on"==c?r.attr("data-required","").attr("aria-required","true"):r.removeAttr("data-required").removeAttr("aria-required");var L=void 0!==this.signatures_by_name[d]&&this.signatures_by_name[d];!1!==L&&(L.required="on"==c),h="debug_action_"+("on"==c?"required":"not_required"),f=!0;break;case"readonly":r.prop("readonly","on"==c),h="debug_action_"+("on"==c?"read_only":"not_read_only"),this.form_date();break;case"set_custom_validity":var O=!1;if(void 0!==this.field_data_cache[o]){var q=this.field_data_cache[o];if(void 0!==t.WS_Form.field_type_cache[q.type]){var M=t.WS_Form.field_type_cache[q.type];O=void 0!==M.invalid_feedback_last_row&&M.invalid_feedback_last_row}}v=t('[id^="'+this.form_id_prefix+"invalid-feedback-"+o+'"]',i);if(O)r=v.siblings('[id^="'+this.form_id_prefix+"field-"+o+'"]');this.set_invalid_feedback(r,v,c,o),p=!0;break;case"click":switch(s){case"group":var z='[href="#'+this.form_id_prefix+"tab-content-"+o+'"]';t(z).click();break;case"field":r.click()}h="debug_action_clicked";break;case"focus":r.focus(),h="debug_action_focussed";break;case"action_run":-1!==this.conditional_actions_run_save.indexOf(o)&&this.form_post("action",o);break;case"action_run_on_save":-1===this.conditional_actions_run_save.indexOf(o)&&(this.conditional_actions_run_save.push(o),this.conditional_actions_changed=!0);break;case"action_run_on_submit":-1===this.conditional_actions_run_submit.indexOf(o)&&(this.conditional_actions_run_submit.push(o),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_save":-1!==(I=this.conditional_actions_run_save.indexOf(o))&&(this.conditional_actions_run_save.splice(I,1),this.conditional_actions_changed=!0);break;case"action_do_not_run_on_submit":var I;-1!==(I=this.conditional_actions_run_submit.indexOf(o))&&(this.conditional_actions_run_submit.splice(I,1),this.conditional_actions_changed=!0);break;case"javascript":try{t.globalEval("(function($) {"+c+"})(jQuery);")}catch(t){this.error("error_js",c)}break;case"form_save":this.form_post("save");break;case"form_submit":this.form_obj.submit();break;case"form_clear":this.form_clear();break;case"form_reset":this.form_reset();break;case"reset":case"clear":var H="clear"===a;switch(s){case"group":this.group_fields_reset(o,H);break;case"section":this.section_fields_reset(o,H,_);break;case"field":this.field_reset(o,H,i)}}if(t.WS_Form.debug_rendered){var P=!1;switch(s){case"form":P=this.language("debug_action_form");var D=this.language("debug_action_form");break;case"group":if(void 0!==this.group_data_cache[o]){var A=this.group_data_cache[o];P=this.language("debug_action_group"),D=A.label}break;case"section":if(void 0!==this.section_data_cache[o])A=this.section_data_cache[o],P=this.language("debug_action_section"),D=A.label;break;case"field":if(void 0!==this.field_data_cache[o])P=(A=this.field_data_cache[o]).type,D=A.label;break;case"action":if(void 0!==this.action_data_cache[o])A=this.action_data_cache[o],P=this.language("debug_action_action"),D=A.label}if(!1!==P){!1!==h&&(l=this.language(h));var V=t.WS_Form.settings_form.conditional.objects[s].action[a],T=V.text.toUpperCase();void 0!==V.values&&"object"==typeof V.values&&void 0!==V.values[c]&&(l=V.values[c].text);var E="<strong>["+this.html_encode(D)+"] "+T+(!1!==l&&""!=l?" '"+this.html_encode(l)+"'":"")+"</strong> ("+this.language("debug_action_type")+": "+P+" | ID: "+o+(n?" | "+this.language("debug_action_row")+" ID: "+n:"")+")";this.log("log_conditional_action_"+e,E,"conditional")}}return{process_required:f,process_bypass:p}},t.WS_Form.prototype.group_fields_reset=function(t,e){if(void 0===this.group_data_cache[t])return!1;var a=this.group_data_cache[t];if(void 0===a.sections)return!1;var i=a.sections;for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];this.section_fields_reset(s.id,e,!1)}},t.WS_Form.prototype.section_fields_reset=function(e,a,i){if(void 0===this.section_data_cache[e])return!1;var r=this.section_data_cache[e];if(void 0===r.fields)return!1;var s=r.fields;for(var o in s)if(s.hasOwnProperty(o)){var n=s[o],c=n.id;if(!1===i)var _='[id^="'+this.form_id_prefix+"field-wrapper-"+c+'"][data-id="'+n.id+'"]';else _="#"+this.form_id_prefix+"field-wrapper-"+c+"-repeat-"+i;var d=t(_,this.form_canvas_obj);this.field_reset(c,a,d)}},t.WS_Form.prototype.field_reset=function(e,a,i){var r=this;if(void 0===i)i=!1;if(void 0!==this.field_data_cache[e]){var s=this.field_data_cache[e],o=t.WS_Form.field_type_cache[s.type],n=void 0!==o.trigger?o.trigger:"change";switch(s.type){case"select":t("option",i).each(function(){var e=!a&&t(this).prop("defaultSelected"),i=t(this).prop("selected")!==e;t(this).prop("selected",e),i&&t(this).trigger(n)});break;case"checkbox":t('input[type="checkbox"]',i).each(function(){var e=!a&&t(this).prop("defaultChecked"),i=t(this).prop("checked")!==e;t(this).prop("checked",e),i&&t(this).trigger(n)});break;case"radio":t('input[type="radio"]',i).each(function(){var e=!a&&t(this).prop("defaultChecked"),i=t(this).prop("checked")!==e;t(this).prop("checked",e),i&&t(this).trigger(n)});break;case"textarea":t("textarea",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),r.textarea_set_value(t(this),e),i&&t(this).trigger("change")});break;case"color":t("input",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),"function"==typeof t(this).minicolors&&t(this).minicolors("value",{color:e}),i&&t(this).trigger("change")});break;case"hidden":var c=a?"":i.attr("data-default-value"),_=i.val()!==c;i.val(c),_&&i.trigger(n);break;default:t("input",i).each(function(){var e=a?"":t(this).prop("defaultValue"),i=t(this).val()!==e;t(this).val(e),i&&t(this).trigger(n)})}}},t.WS_Form.prototype.conditional_logic_previous=function(t,e,a){switch(a){case"||":t|=e;break;case"&&":t&=e}return t},t.WS_Form.prototype.conditional_condition_check=function(t){return void 0!==t.id&&(void 0!==t.object&&(void 0!==t.object_id&&(void 0!==t.object_row_id&&(void 0!==t.logic&&(void 0!==t.value&&(void 0!==t.case_sensitive&&(void 0!==t.logic_previous&&(""!=t.id&&(0!=t.id&&(""!=t.object&&(""!=t.object_id&&""!=t.logic)))))))))))},t.WS_Form.prototype.conditional_action_check=function(t){return void 0!==t.object&&(void 0!==t.object_id&&(void 0!==t.action&&(""!=t.object&&(""!=t.object_id&&""!=t.action))))},t.WS_Form.prototype.form_tabs=function(){if(this.form.groups.length<=1)return!1;var e=this,a=this.get_object_meta_value(this.form,"cookie_tab_index")?this.cookie_get("tab_index",0):0;if(this.form_progress_tabs(a),t.WS_Form.settings_plugin.framework==ws_form_settings.framework_admin){var i=t(".wsf-group-tabs",this.form_canvas_obj);i.hasClass("wsf-tabs")&&this.tabs_destroy(),this.tabs(i,{active:a})}else this.group_index_set(a);var r=this.framework.tabs.public;if(void 0!==r.event_js){var s=r.event_js,o=void 0!==r.event_type_js&&r.event_type_js,n=void 0!==r.event_selector_wrapper_js&&r.event_selector_wrapper_js,c=void 0!==r.event_selector_active_js&&r.event_selector_active_js;switch(o){case"wrapper":var _=t(n,this.form_canvas_obj);break;default:_=t('[href^="#'+this.form_id_prefix+'tab-content-"]',this.form_canvas_obj)}_.on(s,function(a,i){switch(o){case"wrapper":var r=t(c,_).index();break;default:r=t(this).parent().index()}e.get_object_meta_value(e.form,"cookie_tab_index")&&e.cookie_set("tab_index",r),e.form_progress_tabs(r),e.signatures_redraw(r),e.form_textarea(),!1!==e.object_focus&&(e.object_focus.focus(),e.object_focus=!1)})}this.get_object_meta_value(this.form,"tab_validation")&&(this.form_canvas_obj.on("wsf-validate-silent",function(){e.tab_validation()}),this.tab_validation())},t.WS_Form.prototype.tab_validation=function(){var e=this,a=!0,i=t('[href^="#'+this.form_id_prefix+'tab-content-"]',this.form_canvas_obj),r=i.length,s=0;i.each(function(e){if(t(t(this).attr("href")).is(":visible"))return s=e,!1}),i.each(function(i){if(e.tab_validation_previous(t(this),a),i<r-1){if(!0===a)var o=e.object_validate(t(t(this).attr("href")));else o=!1;e.tab_validation_current(t(this),o),a=o}!o&&s>i&&e.group_index_set(i)})},t.WS_Form.prototype.tab_validation_current=function(e,a){var i=e.attr("href"),r=t(i,this.form_canvas_obj),s=t('button[data-action="wsf-tab_next"]',r);a?s.removeAttr("disabled"):s.attr("disabled","")},t.WS_Form.prototype.tab_validation_previous=function(t,e){var a=this.framework.tabs.public;void 0!==a.class_disabled&&(e?t.removeClass(a.class_disabled):t.addClass(a.class_disabled)),void 0!==a.class_parent_disabled&&(e?t.parent().removeClass(a.class_parent_disabled):t.parent().addClass(a.class_parent_disabled))},t.WS_Form.prototype.form_post=function(e,a){if(void 0===e)e="save";if(void 0===a)a=0;var i="submit"==e;this.trigger(e);var r=this;this.form_post_lock(),this.form_add_hidden_input("wsf_form_id",this.form_id),this.form_add_hidden_input("wsf_hash",this.hash),this.form_add_hidden_input("wsf_duration",Math.round(((new Date).getTime()-this.date_start)/1e3)),this.form_add_hidden_input(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),this.section_repeatable_hidden_field(),"submit"==e&&(this.date_start=!1,this.cookie_set("date_start",!1,!1),this.form_timer()),void 0!==ws_form_settings.post_id&&ws_form_settings.post_id>0&&this.form_add_hidden_input("wsf_post_id",ws_form_settings.post_id),this.form_add_hidden_input("wsf_post_mode",e);var s=t("[data-hidden-section],[data-hidden]",r.form_canvas_obj).map(function(){var e=t(this).attr("name");return e=e.replace("[]","")}).get(),o=(s=s.filter(function(t,e,a){return a.indexOf(t)===e})).join();this.form_add_hidden_input("wsf_hidden",o);var n=t("[data-required-bypass-section],[data-required-bypass]",this.form_canvas_obj).map(function(){var e=t(this).attr("name");return e=e.replace("[]","")}).get(),c=(n=n.filter(function(t,e,a){return a.indexOf(t)===e})).join();for(var _ in this.form_add_hidden_input("wsf_bypass_required",c),this.signatures)if(this.signatures.hasOwnProperty(_)){var d=this.signatures[_];if(d.signature.isEmpty()||0==d.canvas_element.width||0==d.canvas_element.height)this.form_add_hidden_input(d.name,"");else{if(d.crop){if("image/jpeg"==d.mime)var l=this.hex_to_rgb(d.background_color);var h=document.createElement("canvas"),f=h.getContext("2d");h.width=d.canvas_element.width,h.height=d.canvas_element.height,f.drawImage(d.canvas_element,0,0);var p,m,v,u=h.width,g=h.height,b={x:[],y:[]},y=f.getImageData(0,0,h.width,h.height);for(m=0;m<g;m++)for(p=0;p<u;p++)v=4*(m*u+p),"image/jpeg"==d.mime?y.data[v]==l.r&&y.data[v+1]==l.g&&y.data[v+2]==l.b||(b.x.push(p),b.y.push(m)):y.data[v+3]>0&&(b.x.push(p),b.y.push(m));b.x.sort(function(t,e){return t-e}),b.y.sort(function(t,e){return t-e});var w=b.x.length-1;if(u=b.x[w]-b.x[0],g=b.y[w]-b.y[0],u>0&&g>0){var k=f.getImageData(b.x[0],b.y[0],u,g);h.width=u,h.height=g,f.putImageData(k,0,0);var j=h.toDataURL(d.mime)}else j=d.signature.toDataURL(d.mime)}else j=d.signature.toDataURL(d.mime);this.form_add_hidden_input(d.name,j)}}var x=[];if(this.conditional_actions_changed)for(var S in!i&&this.conditional_actions_run_save.length>0&&(x=this.conditional_actions_run_save),i&&this.conditional_actions_run_submit.length>0&&(x=this.conditional_actions_run_submit),x)if(x.hasOwnProperty(S)){var F=x[S];x.indexOf(F)==S&&this.form_add_hidden_input("wsf_actions_run[]",F)}if(this.log(i?"log_form_submit":"log_form_save"),0==a&&!1===this.form_ajax)return r.trigger(e+"-complete"),void r.trigger("complete");r.trigger("submit-before-ajax");var W=new FormData(this.form_obj[0]);a>0&&W.append("wsf_action_id",a),this.api_call("submit","POST",W,function(t){r.recaptcha_reset();var a=void 0!==t.error_validation&&t.error_validation,s=void 0!==t.data&&void 0!==t.data.errors&&t.data.errors.length,o=void 0===t.data||"save"==e||a||s;if(r.form_post_unlock("progress",!o,o),!i||a||s||(r.form_hash_clear(),r.get_object_meta_value(r.form,"submit_reload",!0)&&r.form_reload()),s&&r.get_object_meta_value(r.form,"submit_show_errors",!0))for(var n in t.data.errors)if(t.data.errors.hasOwnProperty(n)){var c=t.data.errors[n];r.action_message(c,"danger","after",4e3,!1,!1,!1,!1,!0)}return r.trigger(e+"-complete"),r.trigger("complete"),!s},function(t){r.form_post_unlock("progress",!0,!0),r.recaptcha_reset(),void 0!==t.error_message&&r.action_message(t.error_message,"danger","after",4e3,!1,!1,!1,!1,!0),r.trigger(e+"-error"),r.trigger("error")},a>0)},t.WS_Form.prototype.form_post_lock=function(e,a,i){if(void 0===e)e="progress";if(void 0===a);if(void 0===i)i=!1;this.form_obj.hasClass("wsf-form-post-lock")||(a||this.get_object_meta_value(this.form,"submit_lock",!1))&&(i&&(this.form_ecommerce_calculate_enabled=!1),this.form_obj.addClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),t('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',this.form_canvas_obj).attr("disabled",""),this.form_post_locked=!0,this.trigger("lock"),this.log("log_submit_lock","","duplicate-protect"))},t.WS_Form.prototype.form_post_unlock=function(e,a,i){if(void 0===e)e="progress";if(void 0===a)a=!0;if(void 0===i)i=!1;if(this.form_obj.hasClass("wsf-form-post-lock")){var r=this,s=function(){r.form_ecommerce_calculate_enabled=!0,r.form_obj.removeClass("wsf-form-post-lock"+(e?" wsf-form-post-lock-"+e:"")),t('button[type="submit"].wsf-button, input[type="submit"].wsf-button, button[data-action="wsf-save"].wsf-button, button[data-ecommerce-payment].wsf-button, [data-post-lock]',r.form_canvas_obj).removeAttr("disabled"),r.form_post_locked=!1,r.api_call_progress_reset(),r.trigger("unlock"),r.log("log_submit_unlock","","duplicate-protect")};(i||this.get_object_meta_value(this.form,"submit_unlock",!1))&&(a?setTimeout(function(){s()},1e3):s())}},t.WS_Form.prototype.api_call=function(e,a,i,r,s,o){if(void 0===a)a="POST";if(!i)i=new FormData;if(void 0===o)o=!1;var n=this;if(t.WS_Form.debug_rendered)var c=new Date;var _=o?ws_form_settings.url+e:"submit"==e?this.form_obj.attr("action"):ws_form_settings.url+e;if(!o&&this.form_action_custom&&("submit"==e||"save"==e))return this.form_obj.off("submit"),this.form_obj.submit(),!0;if(null===i.get(ws_form_settings.wsf_nonce_field_name)&&i.append(ws_form_settings.wsf_nonce_field_name,ws_form_settings.wsf_nonce),"GET"===a){for(var d={},l=i.entries(),h=l.next();!h.done;){var f=h.value;d[f[0]]=f[1],h=l.next()}i=d}var p={method:a,url:_,beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",ws_form_settings.x_wp_nonce)},contentType:!1,processData:"GET"===a,statusCode:{200:function(e){if(n.api_call_hash(e)&&t.WS_Form.debug_rendered){var a=new Date-c;n.debug_info("debug_info_submit_count",e.data.count),n.debug_info("debug_info_submit_duration_user",n.get_nice_duration(e.data.submit_duration_user)),n.debug_info("debug_info_submit_duration_client",a+" ms"),n.debug_info("debug_info_submit_duration_server",e.data.submit_duration_server+" ms")}if(t.WS_Form.debug_rendered&&void 0!==e.data){if("object"==typeof e.data.logs)for(var i in e.data.logs)e.data.logs.hasOwnProperty(i)&&n.log("log_action",e.data.logs[i],"action");if("object"==typeof e.data.errors)for(var s in e.data.errors)e.data.errors.hasOwnProperty(s)&&n.error("error_action",e.data.errors[s],"action")}var o="function"!=typeof r||r(e);void 0!==e.data&&o&&(void 0!==e.data.x_wp_nonce&&(ws_form_settings.x_wp_nonce=e.data.x_wp_nonce),"object"==typeof e.data.js&&n.action_js_init(e.data.js))},400:function(t){n.api_call_error_handler(t,400,_,s)},401:function(t){n.api_call_error_handler(t,401,_,s)},403:function(t){n.api_call_error_handler(t,403,_,s)},404:function(t){n.api_call_error_handler(t,404,_,s)},500:function(t){n.api_call_error_handler(t,500,_,s)}},complete:function(){this.api_call_handle=!1}};!1!==i&&(p.data=i);var m=t('[data-source="post_progress"]',this.form_canvas_obj);return m.length&&(p.xhr=function(){var t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",function(t){n.api_call_progress(m,t)},!1),t.addEventListener("progress",function(t){n.api_call_progress(m,t)},!1),t}),t.ajax(p)},t.WS_Form.prototype.api_call_error_handler=function(t,e,a,i){var r=void 0!==t.responseJSON&&t.responseJSON;r&&r.error&&r.error_message?this.error("error_api_call_"+e,r.error_message):this.error("error_api_call_"+e,a),"function"==typeof i&&i(r)},t.WS_Form.prototype.api_call_progress=function(e,a){if(a.lengthComputable){var i=this;e.each(function(){var e=a.loaded/a.total*100;i.form_progress_set_value(t(this),Math.round(e))})}},t.WS_Form.prototype.api_call_progress_reset=function(){var e=this;t('[data-progress-bar][data-source="post_progress"]',this.form_canvas_obj).each(function(){e.form_progress_set_value(t(this),0)})},t.WS_Form.prototype.action_js_init=function(t){this.trigger("actions-start"),this.action_js=t,this.action_js_process_next()},t.WS_Form.prototype.action_js_process_next=function(){if(0==this.action_js.length)return this.trigger("actions-finish"),!1;var e=this.action_js.shift(),a=this.js_action_get_parameter(e,"action"),i=this.js_action_get_parameter(e,"duration");switch(a){case"redirect":!1!==this.js_action_get_parameter(e,"url")&&(location.href=e.url);break;case"message":var r=this.js_action_get_parameter(e,"message"),s=this.js_action_get_parameter(e,"type"),o=this.js_action_get_parameter(e,"method"),n=(i=this.js_action_get_parameter(e,"duration"),this.js_action_get_parameter(e,"form_hide")),c=this.js_action_get_parameter(e,"clear"),_=this.js_action_get_parameter(e,"scroll_top"),d=this.js_action_get_parameter(e,"scroll_top_offset"),l=this.js_action_get_parameter(e,"scroll_top_duration"),h=this.js_action_get_parameter(e,"form_show"),f=this.js_action_get_parameter(e,"message_hide");this.action_message(r,s,o,i,n,c,_,d,l,h,f);break;case"conversion":s=this.js_action_get_parameter(e,"type");var p=this.js_action_get_parameter(e,"parse_values");this.action_conversion(s,p);break;case"javascript":var m=this.js_action_get_parameter(e,"javascript");this.action_javascript(m);break;case"field_invalid_feedback":var v=this.js_action_get_parameter(e,"field_id"),u=this.js_action_get_parameter(e,"invalid_feedback"),g=t("#"+this.form_id_prefix+"field-"+v,this.form_canvas_obj),b=t("#"+this.form_id_prefix+"invalid-feedback-"+v,this.form_canvas_obj);this.set_invalid_feedback(g,b,u,v),process_bypass=!0;var y=this;g.one("change input keyup",function(){var e=t(this).closest("[data-id]").attr("data-id"),a=t("#"+y.form_id_prefix+"invalid-feedback-"+e,this.form_canvas_obj);y.set_invalid_feedback(t(this),a,"",e)});break;default:this.action_js_process_next()}},t.WS_Form.prototype.js_action_get_parameter=function(t,e){return void 0!==t[e]&&t[e]},t.WS_Form.prototype.get_framework_config_value=function(t,e){return void 0===this.framework[t]?(this.error("error_api_call_framework_invalid"),!1):void 0===this.framework[t].public?(this.error("error_api_call_framework_invalid"),!1):void 0!==this.framework[t].public[e]&&this.framework[t].public[e]},t.WS_Form.prototype.action_message=function(e,a,i,r,s,o,n,c,_,d,l){if(void 0===a)a="information";if(void 0===i)i="before";if(void 0===r)r=0;if(void 0===s)s=!1;if(void 0===o)o=!0;if(void 0===n)n=!1;if(void 0===c)c=0;if(c=""==c?0:parseInt(c,10),void 0===_)_=0;if(void 0===d)d=!1;if(void 0===l)l=!1;var h=this.form_canvas_obj.offset().top-c;(r=parseInt(r,10))<0&&(r=0);var f=this.get_framework_config_value("message","mask_wrapper"),p=this.get_framework_config_value("message","types"),m=void 0!==(a=void 0!==p[a]&&p[a]).mask_wrapper_class&&a.mask_wrapper_class;switch(o&&t('[data-wsf-message][data-wsf-instance-id="'+this.form_instance_id+'"]').remove(),n){case"instant":case"on":t("html,body").scrollTop(h);break;case"smooth":_=""==_?0:parseInt(_,10),t("html,body").animate({scrollTop:h},_)}var v={message:e,mask_wrapper_class:m},u=t("<div/>",{html:this.mask_parse(f,v)});switch(u.attr("data-wsf-message",""),u.attr("data-wsf-instance-id",this.form_instance_id),s&&this.form_obj.hide(),i){case"before":u.insertBefore(this.form_obj);break;case"after":u.insertAfter(this.form_obj)}var g=this;setTimeout(function(){l&&u.remove(),d&&g.form_canvas_obj.show(),g.action_js_process_next()},parseInt(r,10))},t.WS_Form.prototype.action_conversion=function(e,a){if(void 0===e)return!1;if(void 0===t.WS_Form.analytics[e])return!1;if(void 0===t.WS_Form.analytics[e].functions)return!1;if(void 0!==this.analytics_function[e])var i=this.analytics_function[e];else i=Object.keys(t.WS_Form.analytics[e].functions)[0];this.form_analytics_event_fire(e,i,a),this.action_js_process_next()},t.WS_Form.prototype.action_javascript=function(e){try{t.globalEval("(function($) {"+e+"})(jQuery);"),this.log("log_javascript","action")}catch(t){this.error("error_js",e)}this.action_js_process_next()},t.WS_Form.prototype.form_character_word_count=function(e){var a=this;if(void 0===e)e=this.form_canvas_obj;for(var i in this.field_data_cache)if(this.field_data_cache.hasOwnProperty(i)){var r=this.field_data_cache[i],s=this.get_object_meta_value(r,"help","",!1,!0),o=-1!==s.indexOf("#character_")||-1!==s.indexOf("#word_");if(this.has_object_meta_key(r,"min_length")||this.has_object_meta_key(r,"max_length")||this.has_object_meta_key(r,"min_length_words")||this.has_object_meta_key(r,"max_length_words")||o){if(!(n=t("#"+this.form_id_prefix+"field-"+i,e)).length)var n=t('[id^="'+this.form_id_prefix+"field-"+i+'-"]:not([data-init-char-word-count]):not(iframe)',e);n.each(function(){t(this).attr("data-init-char-word-count",""),a.form_character_word_count_process(t(this))&&t(this).on("keyup change focus blur paste",function(){a.form_character_word_count_process(t(this))})})}}},t.WS_Form.prototype.form_character_word_count_process=function(e){var a=e.closest("[data-type]"),i=a.attr("data-id"),r=u=a.attr("data-repeatable-index"),s=this.field_data_cache[i],o=this.get_object_meta_value(s,"min_length","");o=parseInt(o,10)>0&&parseInt(o,10);var n=this.get_object_meta_value(s,"max_length","");n=parseInt(n,10)>0&&parseInt(n,10);var c=this.get_object_meta_value(s,"min_length_words","");c=parseInt(c,10)>0&&parseInt(c,10);var _=this.get_object_meta_value(s,"max_length_words","");_=parseInt(_,10)>0&&parseInt(_,10);var d=e.val(),l=d.length,h=!1!==n&&n-l;h<0&&(h=0);var f=this.get_word_count(d),p=!1!==_&&_-f;p<0&&(p=0);var m=!1,v=[];!1!==o&&l<o&&(v.push(this.language("error_min_length",o)),m=!0),!1!==n&&l>n&&(v.push(this.language("error_max_length",n)),m=!0),!1!==c&&f<c&&(v.push(this.language("error_min_length_words",c)),m=!0),!1!==_&&f>_&&(v.push(this.language("error_max_length_words",_)),m=!0);r=void 0!==(u=a.attr("data-repeatable-index"))?"-repeat-"+u:"";var u,g=t("#"+this.form_id_prefix+"invalid-feedback-"+i+r,this.form_canvas_obj);(void 0!==e.attr("required")||d.length>0)&&m?this.set_invalid_feedback(e,g,v.join(" / "),i):this.set_invalid_feedback(e,g,"",i);var b=this.get_object_meta_value(s,"help","",!1,!0);if(-1===b.indexOf("#character_")&&-1===b.indexOf("#word_"))return!0;var y=this.language("character_singular"),w=this.language("character_plural"),k=this.language("word_singular"),j=this.language("word_plural"),x={character_count:l,character_count_label:1==l?y:w,character_remaining:!1!==h?h:"",character_remaining_label:1==h?y:w,character_min:!1!==o?o:"",character_min_label:!1!==o?1==o?y:w:"",character_max:!1!==n?n:"",character_max_label:!1!==n?1==n?y:w:"",word_count:f,word_count_label:1==f?k:j,word_remaining:!1!==p?p:"",word_remaining_label:1==p?k:j,word_min:!1!==c?c:"",word_min_label:!1!==c?1==c?k:j:"",word_max:!1!==_?_:"",word_max_label:!1!==_?1==_?k:j:""},S=this.mask_parse(b,x),F=this.form_id_prefix+"help-"+i+r;return t("#"+F,this.form_canvas_obj).html(S),!0},t.WS_Form.prototype.get_word_count=function(t){return 0==(t=t.trim()).length?0:t.trim().replace(/\s+/gi," ").split(" ").length},t.WS_Form.prototype.api_call_hash=function(t){var e=!0;return void 0===t.hash&&(e=!1),e&&32!=t.hash.length&&(e=!1),e&&this.hash_set(t.hash),e},t.WS_Form.prototype.hash_set=function(e,a){void 0===a&&(a=!1),e!=this.hash&&(this.hash=e,a=!0,this.log("log_hash_set",this.hash),t.WS_Form.debug_rendered&&this.debug_info("debug_info_hash",this.hash,"clear_hash")),a&&this.cookie_set("hash",this.hash)},t.WS_Form.prototype.generate_password=function(t){for(var e="",a="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()_+~`|}{[]\\:;?><,./-=",i=0;i<t;++i)e+=a.charAt(Math.floor(Math.random()*a.length));return e},t.WS_Form.prototype.form_stat=function(){ws_form_settings.stat&&this.form_stat_add_view()},t.WS_Form.prototype.form_stat_add_view=function(){t.ajax({method:"POST",url:ws_form_settings.url+"form/"+this.form_id+"/stat/add_view/"})},window.wsf_form_instances=[],window.wsf_form_init=function(e){if(void 0===e&&(e=!0),e){var a=0;t(".wsf-form").each(function(){var e=parseInt(t(this).attr("data-instance-id"));e>a&&(a=e)}),a++}t(".wsf-form").each(function(){if(""===t(this).html()){e&&(t(this).attr("id","ws-form-"+a),t(this).attr("data-instance-id",a));var i=t(this).attr("id"),r=t(this).attr("data-id"),s=t(this).attr("data-instance-id"),o=new t.WS_Form;window.wsf_form_instances[s]=o,o.render({obj:"#"+i,form_id:r})}})},t(function(){wsf_form_init(!1)})}(jQuery);